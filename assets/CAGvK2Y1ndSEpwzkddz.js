import{O as e,k as t}from"./index-ByJQWOIH.js";
/* @preserve
* Leaflet 2.0.0-alpha, a JS library for interactive maps. https://leafletjs.com
* (c) 2010-2025 Volodymyr Agafonkin, (c) 2010-2011 CloudMade
*/
let n=0;function r(e){return`_leaflet_id`in e||(e._leaflet_id=++n),e._leaflet_id}function i(e,t,n){let r,i;function a(){r=!1,i&&=(o.apply(n,i),!1)}function o(...o){r?i=o:(e.apply(n,o),setTimeout(a,t),r=!0)}return o}function a(e,t,n){let r=t[1],i=t[0],a=r-i;return e===r&&n?e:((e-i)%a+a)%a+i}function o(){return!1}function s(e,t){if(t===!1)return e;let n=10**(t===void 0?6:t);return Math.round(e*n)/n}function c(e){return e.trim().split(/\s+/)}function l(e,t){for(let n in Object.hasOwn(e,`options`)||(e.options=e.options?Object.create(e.options):{}),t)Object.hasOwn(t,n)&&(e.options[n]=t[n]);return e.options}const u=/\{ *([\w_ -]+) *\}/g;function d(e,t){return e.replace(u,(e,n)=>{let r=t[n];if(r===void 0)throw Error(`No value provided for variable ${e}`);return typeof r==`function`&&(r=r(t)),r})}const f=`data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=`;var p={__proto__:null,emptyImageUrl:f,falseFn:o,formatNum:s,get lastId(){return n},setOptions:l,splitWords:c,stamp:r,template:d,throttle:i,wrapNum:a},m=class{static extend({statics:e,includes:t,...n}){let r=class extends this{};Object.setPrototypeOf(r,this);let i=this.prototype,a=r.prototype;if(e&&Object.assign(r,e),Array.isArray(t))for(let e of t)Object.assign(a,e);else t&&Object.assign(a,t);return Object.assign(a,n),a.options&&(a.options=i.options?Object.create(i.options):{},Object.assign(a.options,n.options)),a._initHooks=[],r}static include(e){let t=this.prototype.options;return Object.assign(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this}static mergeOptions(e){return this.prototype.options??={},Object.assign(this.prototype.options,e),this}static addInitHook(e,...t){let n=typeof e==`function`?e:function(){this[e].apply(this,t)};return this.prototype._initHooks??=[],this.prototype._initHooks.push(n),this}constructor(...e){this._initHooksCalled=!1,l(this),this.initialize&&this.initialize(...e),this.callInitHooks()}callInitHooks(){if(this._initHooksCalled)return;let e=[],t=this;for(;(t=Object.getPrototypeOf(t))!==null;)e.push(t);e.reverse();for(let t of e)for(let e of t._initHooks??[])e.call(this);this._initHooksCalled=!0}};const h={on(e,t,n){if(typeof e==`object`)for(let[n,r]of Object.entries(e))this._on(n,r,t);else for(let r of c(e))this._on(r,t,n);return this},off(e,t,n){if(!arguments.length)delete this._events;else if(typeof e==`object`)for(let[n,r]of Object.entries(e))this._off(n,r,t);else{let r=arguments.length===1;for(let i of c(e))r?this._off(i):this._off(i,t,n)}return this},_on(e,t,n,r){if(typeof t!=`function`){console.warn(`wrong listener type: ${typeof t}`);return}if(this._listens(e,t,n)!==!1)return;n===this&&(n=void 0);let i={fn:t,ctx:n};r&&(i.once=!0),this._events??={},this._events[e]??=[],this._events[e].push(i)},_off(e,t,n){if(!this._events)return;let r=this._events[e];if(!r)return;if(arguments.length===1){if(this._firingCount)for(let e of r)e.fn=o;delete this._events[e];return}if(typeof t!=`function`){console.warn(`wrong listener type: ${typeof t}`);return}let i=this._listens(e,t,n);if(i!==!1){let t=r[i];this._firingCount&&(t.fn=o,this._events[e]=r=r.slice()),r.splice(i,1)}},fire(e,t,n){if(!this.listens(e,n))return this;let r={...t,type:e,target:this,sourceTarget:t?.sourceTarget||this};if(this._events){let t=this._events[e];if(t){this._firingCount=this._firingCount+1||1;for(let n of t){let t=n.fn;n.once&&this.off(e,t,n.ctx),t.call(n.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens(e,t,n,r){typeof e!=`string`&&console.warn(`"string" type argument expected`);let i=t;if(typeof t!=`function`&&(r=!!t,i=void 0,n=void 0),this._events?.[e]?.length&&this._listens(e,i,n)!==!1)return!0;if(r){for(let i of Object.values(this._eventParents??{}))if(i.listens(e,t,n,r))return!0}return!1},_listens(e,t,n){if(!this._events)return!1;let r=this._events[e]??[];if(!t)return!!r.length;n===this&&(n=void 0);let i=r.findIndex(e=>e.fn===t&&e.ctx===n);return i===-1?!1:i},once(e,t,n){if(typeof e==`object`)for(let[n,r]of Object.entries(e))this._on(n,r,t,!0);else for(let r of c(e))this._on(r,t,n,!0);return this},addEventParent(e){return this._eventParents??={},this._eventParents[r(e)]=e,this},removeEventParent(e){return this._eventParents&&delete this._eventParents[r(e)],this},_propagateEvent(e){for(let t of Object.values(this._eventParents??{}))t.fire(e.type,{propagatedFrom:e.target,...e},!0)}};h.addEventListener=h.on,h.removeEventListener=h.clearAllEventListeners=h.off,h.addOneTimeEventListener=h.once,h.fireEvent=h.fire,h.hasEventListeners=h.listens;const g=m.extend(h);var _=class e{constructor(t,n,r){let i=e.validate(t,n);if(!i)throw Error(`Invalid Point object: (${t}, ${n})`);let a,o;if(t instanceof e)return t;Array.isArray(t)?(a=t[0],o=t[1]):typeof t==`object`&&`x`in t&&`y`in t?(a=t.x,o=t.y):(a=t,o=n),this.x=r?Math.round(a):a,this.y=r?Math.round(o):o}static validate(t,n){return t instanceof e||Array.isArray(t)||t&&typeof t==`object`&&`x`in t&&`y`in t?!0:!!((t||t===0)&&(n||n===0))}clone(){let t=new e(0,0);return t.x=this.x,t.y=this.y,t}add(t){return this.clone()._add(new e(t))}_add(e){return this.x+=e.x,this.y+=e.y,this}subtract(t){return this.clone()._subtract(new e(t))}_subtract(e){return this.x-=e.x,this.y-=e.y,this}divideBy(e){return this.clone()._divideBy(e)}_divideBy(e){return this.x/=e,this.y/=e,this}multiplyBy(e){return this.clone()._multiplyBy(e)}_multiplyBy(e){return this.x*=e,this.y*=e,this}scaleBy(t){return new e(this.x*t.x,this.y*t.y)}unscaleBy(t){return new e(this.x/t.x,this.y/t.y)}round(){return this.clone()._round()}_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}floor(){return this.clone()._floor()}_floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.clone()._ceil()}_ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}trunc(){return this.clone()._trunc()}_trunc(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}distanceTo(t){t=new e(t);let n=t.x-this.x,r=t.y-this.y;return Math.sqrt(n*n+r*r)}equals(t){return t=new e(t),t.x===this.x&&t.y===this.y}contains(t){return t=new e(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)}toString(){return`Point(${s(this.x)}, ${s(this.y)})`}},v=class e{constructor(t,n){if(!t)return;if(t instanceof e)return t;let r=n?[t,n]:t;for(let e of r)this.extend(e)}extend(t){let n,r;if(!t)return this;if(t instanceof _||typeof t[0]==`number`||`x`in t)n=r=new _(t);else if(t=new e(t),n=t.min,r=t.max,!n||!r)return this;return!this.min&&!this.max?(this.min=n.clone(),this.max=r.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)),this}getCenter(e){return new _((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)}getBottomLeft(){return new _(this.min.x,this.max.y)}getTopRight(){return new _(this.max.x,this.min.y)}getTopLeft(){return this.min}getBottomRight(){return this.max}getSize(){return this.max.subtract(this.min)}contains(t){let n,r;return t=typeof t[0]==`number`||t instanceof _?new _(t):new e(t),t instanceof e?(n=t.min,r=t.max):n=r=t,n.x>=this.min.x&&r.x<=this.max.x&&n.y>=this.min.y&&r.y<=this.max.y}intersects(t){t=new e(t);let n=this.min,r=this.max,i=t.min,a=t.max,o=a.x>=n.x&&i.x<=r.x,s=a.y>=n.y&&i.y<=r.y;return o&&s}overlaps(t){t=new e(t);let n=this.min,r=this.max,i=t.min,a=t.max,o=a.x>n.x&&i.x<r.x,s=a.y>n.y&&i.y<r.y;return o&&s}isValid(){return!!(this.min&&this.max)}pad(t){let n=this.min,r=this.max,i=Math.abs(n.x-r.x)*t,a=Math.abs(n.y-r.y)*t;return new e(new _(n.x-i,n.y-a),new _(r.x+i,r.y+a))}equals(t){return t?(t=new e(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}},y=class e{constructor(t,n){if(!t)return;if(t instanceof e)return t;let r=n?[t,n]:t;for(let e of r)this.extend(e)}extend(t){let n=this._southWest,r=this._northEast,i,a;if(t instanceof b)i=t,a=t;else if(t instanceof e){if(i=t._southWest,a=t._northEast,!i||!a)return this}else return t?b.validate(t)?this.extend(new b(t)):this.extend(new e(t)):this;return!n&&!r?(this._southWest=new b(i.lat,i.lng),this._northEast=new b(a.lat,a.lng)):(n.lat=Math.min(i.lat,n.lat),n.lng=Math.min(i.lng,n.lng),r.lat=Math.max(a.lat,r.lat),r.lng=Math.max(a.lng,r.lng)),this}pad(t){let n=this._southWest,r=this._northEast,i=Math.abs(n.lat-r.lat)*t,a=Math.abs(n.lng-r.lng)*t;return new e(new b(n.lat-i,n.lng-a),new b(r.lat+i,r.lng+a))}getCenter(){return new b((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)}getSouthWest(){return this._southWest}getNorthEast(){return this._northEast}getNorthWest(){return new b(this.getNorth(),this.getWest())}getSouthEast(){return new b(this.getSouth(),this.getEast())}getWest(){return this._southWest.lng}getSouth(){return this._southWest.lat}getEast(){return this._northEast.lng}getNorth(){return this._northEast.lat}contains(t){t=b.validate(t)?new b(t):new e(t);let n=this._southWest,r=this._northEast,i,a;return t instanceof e?(i=t.getSouthWest(),a=t.getNorthEast()):i=a=t,i.lat>=n.lat&&a.lat<=r.lat&&i.lng>=n.lng&&a.lng<=r.lng}intersects(t){t=new e(t);let n=this._southWest,r=this._northEast,i=t.getSouthWest(),a=t.getNorthEast(),o=a.lat>=n.lat&&i.lat<=r.lat,s=a.lng>=n.lng&&i.lng<=r.lng;return o&&s}overlaps(t){t=new e(t);let n=this._southWest,r=this._northEast,i=t.getSouthWest(),a=t.getNorthEast(),o=a.lat>n.lat&&i.lat<r.lat,s=a.lng>n.lng&&i.lng<r.lng;return o&&s}toBBoxString(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(`,`)}equals(t,n){return t?(t=new e(t),this._southWest.equals(t.getSouthWest(),n)&&this._northEast.equals(t.getNorthEast(),n)):!1}isValid(){return!!(this._southWest&&this._northEast)}},b=class e{constructor(t,n,r){let i=e.validate(t,n,r);if(!i)throw Error(`Invalid LatLng object: (${t}, ${n})`);let a,o,s;if(t instanceof e)return t;Array.isArray(t)&&typeof t[0]!=`object`?t.length===3?(a=t[0],o=t[1],s=t[2]):t.length===2&&(a=t[0],o=t[1]):typeof t==`object`&&`lat`in t?(a=t.lat,o=`lng`in t?t.lng:t.lon,s=t.alt):(a=t,o=n,s=r),this.lat=+a,this.lng=+o,s!==void 0&&(this.alt=+s)}static validate(t,n,r){return t instanceof e||typeof t==`object`&&`lat`in t?!0:t&&Array.isArray(t)&&typeof t[0]!=`object`?t.length===3||t.length===2:!!((t||t===0)&&(n||n===0))}equals(t,n){if(!t)return!1;t=new e(t);let r=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return r<=(n??1e-9)}toString(e){return`LatLng(${s(this.lat,e)}, ${s(this.lng,e)})`}distanceTo(t){return S.distance(this,new e(t))}wrap(){return S.wrapLatLng(this)}toBounds(e){let t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new y([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])}clone(){let t=new e(0,0);return t.lat=this.lat,t.lng=this.lng,t.alt=this.alt,t}},x=class{static projection=void 0;static transformation=void 0;static latLngToPoint(e,t){let n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)}static pointToLatLng(e,t){let n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)}static project(e){return this.projection.project(e)}static unproject(e){return this.projection.unproject(e)}static scale(e){return 256*2**e}static zoom(e){return Math.log(e/256)/Math.LN2}static getProjectedBounds(e){if(this.infinite)return null;let t=this.projection.bounds,n=this.scale(e),r=this.transformation.transform(t.min,n),i=this.transformation.transform(t.max,n);return new v(r,i)}static infinite=!1;static wrapLatLng(e){let t=this.wrapLng?a(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?a(e.lat,this.wrapLat,!0):e.lat,r=e.alt;return new b(n,t,r)}static wrapLatLngBounds(e){let t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,i=t.lng-n.lng;if(r===0&&i===0)return e;let a=e.getSouthWest(),o=e.getNorthEast(),s=new b(a.lat-r,a.lng-i),c=new b(o.lat-r,o.lng-i);return new y(s,c)}},S=class extends x{static wrapLng=[-180,180];static R=6371e3;static distance(e,t){let n=Math.PI/180,r=e.lat*n,i=t.lat*n,a=Math.sin((t.lat-e.lat)*n/2),o=Math.sin((t.lng-e.lng)*n/2),s=a*a+Math.cos(r)*Math.cos(i)*o*o,c=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*c}};const ee=6378137,te={R:ee,MAX_LATITUDE:85.0511287798,project(e){let t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return new _(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject(e){let t=180/Math.PI;return new b((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(()=>{let e=ee*Math.PI;return new v([-e,-e],[e,e])})()};var ne=class{constructor(e,t,n,r){if(Array.isArray(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=n,this._d=r}transform(e,t){return this._transform(e.clone(),t)}_transform(e,t){return t||=1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e}untransform(e,t){return t||=1,new _((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},re=class extends S{static code=`EPSG:3857`;static projection=te;static transformation=(()=>{let e=.5/(Math.PI*te.R);return new ne(e,.5,-e,.5)})()},ie=class extends re{static code=`EPSG:900913`};const ae=me(`chrome`),oe=!ae&&me(`safari`),se=typeof orientation<`u`||me(`mobile`),ce=typeof window>`u`?!1:!!window.PointerEvent,le=typeof window>`u`?!1:`ontouchstart`in window||!!window.TouchEvent,ue=le||ce,de=typeof window>`u`||window.devicePixelRatio===void 0?!1:window.devicePixelRatio>1,fe=typeof navigator>`u`||navigator.platform===void 0?!1:navigator.platform.startsWith(`Mac`),pe=typeof navigator>`u`||navigator.platform===void 0?!1:navigator.platform.startsWith(`Linux`);function me(e){return typeof navigator>`u`||navigator.userAgent===void 0?!1:navigator.userAgent.toLowerCase().includes(e)}var C={chrome:ae,safari:oe,mobile:se,pointer:ce,touch:ue,touchNative:le,retina:de,mac:fe,linux:pe};function he(e){let t={bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed,detail:2,view:e.view,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,button:e.button,buttons:e.buttons,relatedTarget:e.relatedTarget,region:e.region},n;return e instanceof PointerEvent?(t={...t,pointerId:e.pointerId,width:e.width,height:e.height,pressure:e.pressure,tangentialPressure:e.tangentialPressure,tiltX:e.tiltX,tiltY:e.tiltY,twist:e.twist,pointerType:e.pointerType,isPrimary:e.isPrimary},n=new PointerEvent(`dblclick`,t)):n=new MouseEvent(`dblclick`,t),n}function ge(e,t){e.addEventListener(`dblclick`,t);let n=0,r;function i(e){if(e.detail!==1){r=e.detail;return}if(e.pointerType===`mouse`||e.sourceCapabilities&&!e.sourceCapabilities.firesTouchEvents)return;let t=Xe(e);if(t.some(e=>e instanceof HTMLLabelElement&&e.attributes.for)&&!t.some(e=>e instanceof HTMLInputElement||e instanceof HTMLSelectElement))return;let i=Date.now();i-n<=200?(r++,r===2&&e.target.dispatchEvent(he(e))):r=1,n=i}return e.addEventListener(`click`,i),{dblclick:t,simDblclick:i}}function _e(e,t){e.removeEventListener(`dblclick`,t.dblclick),e.removeEventListener(`click`,t.simDblclick)}function ve(e){return typeof e==`string`?document.getElementById(e):e}function w(e,t,n){let r=document.createElement(e);return r.className=t??``,n&&n.appendChild(r),r}function ye(e){let t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function be(e){let t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function T(e,t,n){let r=t??new _(0,0);e.style.transform=`translate3d(${r.x}px,${r.y}px,0)${n?` scale(${n})`:``}`}const xe=new WeakMap;function E(e,t){xe.set(e,t),T(e,t)}function D(e){return xe.get(e)??new _(0,0)}const Se=typeof document>`u`?{}:document.documentElement.style,Ce=[`userSelect`,`WebkitUserSelect`].find(e=>e in Se);let we;function Te(){let e=Se[Ce];e!==`none`&&(we=e,Se[Ce]=`none`)}function Ee(){we!==void 0&&(Se[Ce]=we,we=void 0)}function De(){A(window,`dragstart`,P)}function Oe(){M(window,`dragstart`,P)}let ke,Ae;function je(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(Me(),ke=e,Ae=e.style.outlineStyle,e.style.outlineStyle=`none`,A(window,`keydown`,Me))}function Me(){ke&&(ke.style.outlineStyle=Ae,ke=void 0,Ae=void 0,M(window,`keydown`,Me))}function Ne(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Pe(e){let t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var O={__proto__:null,create:w,disableImageDrag:De,disableTextSelection:Te,enableImageDrag:Oe,enableTextSelection:Ee,get:ve,getPosition:D,getScale:Pe,getSizedParentNode:Ne,preventOutline:je,restoreOutline:Me,setPosition:E,setTransform:T,toBack:be,toFront:ye};let k=new Map,Fe=!1;function Ie(){Fe||(Fe=!0,document.addEventListener(`pointerdown`,Re,{capture:!0}),document.addEventListener(`pointermove`,ze,{capture:!0}),document.addEventListener(`pointerup`,Be,{capture:!0}),document.addEventListener(`pointercancel`,Be,{capture:!0}),k=new Map)}function Le(){document.removeEventListener(`pointerdown`,Re,{capture:!0}),document.removeEventListener(`pointermove`,ze,{capture:!0}),document.removeEventListener(`pointerup`,Be,{capture:!0}),document.removeEventListener(`pointercancel`,Be,{capture:!0}),Fe=!1}function Re(e){k.set(e.pointerId,e)}function ze(e){k.has(e.pointerId)&&k.set(e.pointerId,e)}function Be(e){k.delete(e.pointerId)}function Ve(){return[...k.values()]}function He(){k.clear()}var Ue={__proto__:null,cleanupPointers:He,disablePointerDetection:Le,enablePointerDetection:Ie,getPointers:Ve};function A(e,t,n,r){if(t&&typeof t==`object`)for(let[r,i]of Object.entries(t))Ke(e,r,i,n);else for(let i of c(t))Ke(e,i,n,r);return this}const j=`_leaflet_events`;function M(e,t,n,r){if(arguments.length===1)We(e),delete e[j];else if(t&&typeof t==`object`)for(let[r,i]of Object.entries(t))qe(e,r,i,n);else if(t=c(t),arguments.length===2)We(e,e=>t.includes(e));else for(let i of t)qe(e,i,n,r);return this}function We(e,t){for(let n of Object.keys(e[j]??{})){let r=n.split(/\d/)[0];(!t||t(r))&&qe(e,r,null,null,n)}}const Ge={pointerenter:`pointerover`,pointerleave:`pointerout`,wheel:typeof window>`u`?!1:!(`onwheel`in window)&&`mousewheel`};function Ke(e,t,n,i){let a=t+r(n)+(i?`_${r(i)}`:``);if(e[j]&&e[j][a])return this;let o=function(t){return n.call(i||e,t||window.event)},s=o;C.touch&&t===`dblclick`?o=ge(e,o):`addEventListener`in e?t===`wheel`||t===`mousewheel`?e.addEventListener(Ge[t]||t,o,{passive:!1}):t===`pointerenter`||t===`pointerleave`?(o=function(t){t??=window.event,et(e,t)&&s(t)},e.addEventListener(Ge[t],o,!1)):e.addEventListener(t,s,!1):e.attachEvent(`on${t}`,o),e[j]??={},e[j][a]=o}function qe(e,t,n,i,a){a??=t+r(n)+(i?`_${r(i)}`:``);let o=e[j]&&e[j][a];if(!o)return this;C.touch&&t===`dblclick`?_e(e,o):`removeEventListener`in e?e.removeEventListener(Ge[t]||t,o,!1):e.detachEvent(`on${t}`,o),e[j][a]=null}function N(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Je(e){return Ke(e,`wheel`,N),this}function Ye(e){return A(e,`pointerdown dblclick contextmenu`,N),e._leaflet_disable_click=!0,this}function P(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function F(e){return P(e),N(e),this}function Xe(e){return e.composedPath()}function Ze(e,t){if(!t)return new _(e.clientX,e.clientY);let n=Pe(t),r=n.boundingClientRect;return new _((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}function Qe(){let e=window.devicePixelRatio;return C.linux&&C.chrome?e:C.mac?e*3:e>0?2*e:1}function $e(e){return e.deltaY&&e.deltaMode===0?-e.deltaY/Qe():e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:(e.deltaX||e.deltaZ,0)}function et(e,t){let n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch{return!1}return n!==e}var I={__proto__:null,PointerEvents:Ue,addListener:A,disableClickPropagation:Ye,disableScrollPropagation:Je,getPointerPosition:Ze,getPropagationPath:Xe,getWheelDelta:$e,getWheelPxFactor:Qe,isExternalTarget:et,off:M,on:A,preventDefault:P,removeListener:M,stop:F,stopPropagation:N};const tt=g.extend({run(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n??.25,this._easeOutPower=1/Math.max(r??.5,.2),this._startPos=D(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire(`start`),this._animate()},stop(){this._inProgress&&(this._step(!0),this._complete())},_animate(){this._animId=requestAnimationFrame(this._animate.bind(this)),this._step()},_step(e){let t=+new Date-this._startTime,n=this._duration*1e3;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame(e,t){let n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),E(this._el,n),this.fire(`step`)},_complete(){cancelAnimationFrame(this._animId),this._inProgress=!1,this.fire(`end`)},_easeOut(e){return 1-(1-e)**this._easeOutPower}}),L=g.extend({options:{crs:re,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize(e,t){t=l(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(new b(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&this._createAnimProxy(),this._addLayers(this.options.layers)},setView(e,t,n){if(t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(new b(e),t,this.options.maxBounds),n??={},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom={animate:n.animate,...n.zoom},n.pan={animate:n.animate,duration:n.duration,...n.pan});let r=this._zoom===t?this._tryAnimatedPan(e,n.pan):this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t,n.pan?.noMoveStart),this},setZoom(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn(e,t){return e??=this.options.zoomDelta,this.setZoom(this._zoom+e,t)},zoomOut(e,t){return e??=this.options.zoomDelta,this.setZoom(this._zoom-e,t)},setZoomAround(e,t,n){let r=this.getZoomScale(t),i=this.getSize().divideBy(2),a=e instanceof _?e:this.latLngToContainerPoint(e),o=a.subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(o));return this.setView(s,t,{zoom:n})},_getBoundsCenterZoom(e,t){t??={},e=e.getBounds?e.getBounds():new y(e);let n=new _(t.paddingTopLeft||t.padding||[0,0]),r=new _(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r));if(i=typeof t.maxZoom==`number`?Math.min(t.maxZoom,i):i,i===1/0)return{center:e.getCenter(),zoom:i};let a=r.subtract(n).divideBy(2),o=this.project(e.getSouthWest(),i),s=this.project(e.getNorthEast(),i),c=this.unproject(o.add(s).divideBy(2).add(a),i);return{center:c,zoom:i}},fitBounds(e,t){if(e=new y(e),!e.isValid())throw Error(`Bounds are not valid.`);let n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo(e,t){return this.setView(e,this._zoom,{pan:t})},panBy(e,t){if(e=new _(e).round(),t??={},!e.x&&!e.y)return this.fire(`moveend`);if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tt,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire(`movestart`),t.animate!==!1){this._mapPane.classList.add(`leaflet-pan-anim`);let n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire(`move`).fire(`moveend`);return this},flyTo(e,t,n){if(n??={},n.animate===!1)return this.setView(e,t,n);this._stop();let r=this.project(this.getCenter()),i=this.project(e),a=this.getSize(),o=this._zoom;e=new b(e),t=t===void 0?o:this._limitZoom(t);let s=Math.max(a.x,a.y),c=s*this.getZoomScale(o,t),l=i.distanceTo(r)||1,u=1.42,d=u*u;function f(e){let t=e?-1:1,n=e?c:s,r=c*c-s*s+t*d*d*l*l,i=2*n*d*l,a=r/i,o=Math.sqrt(a*a+1)-a,u=o<1e-9?-18:Math.log(o);return u}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function m(e){return(Math.exp(e)+Math.exp(-e))/2}function h(e){return p(e)/m(e)}let g=f(0);function _(e){return s*(m(g)/m(g+u*e))}function v(e){return s*(m(g)*h(g+u*e)-p(g))/d}function y(e){return 1-(1-e)**1.5}let x=Date.now(),S=(f(1)-g)/u,ee=n.duration?1e3*n.duration:1e3*S*.8;function te(){let n=(Date.now()-x)/ee,a=y(n)*S;n<=1?(this._flyToFrame=requestAnimationFrame(te.bind(this)),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(v(a)/l)),o),this.getScaleZoom(s/_(a),o),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),te.call(this),this},flyToBounds(e,t){let n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds(e){return e=new y(e),this.listens(`moveend`,this._panInsideMaxBounds)&&this.off(`moveend`,this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on(`moveend`,this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom(e){let t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire(`zoomlevelschange`),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom(e){let t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire(`zoomlevelschange`),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds(e,t){this._enforcingBounds=!0;let n=this.getCenter(),r=this._limitCenter(n,this._zoom,new y(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside(e,t){t??={};let n=new _(t.paddingTopLeft||t.padding||[0,0]),r=new _(t.paddingBottomRight||t.padding||[0,0]),i=this.project(this.getCenter()),a=this.project(e),o=this.getPixelBounds(),s=new v([o.min.add(n),o.max.subtract(r)]),c=s.getSize();if(!s.contains(a)){this._enforcingBounds=!0;let e=a.subtract(s.getCenter()),n=s.extend(a).getSize().subtract(c);i.x+=e.x<0?-n.x:n.x,i.y+=e.y<0?-n.y:n.y,this.panTo(this.unproject(i),t),this._enforcingBounds=!1}return this},invalidateSize(e){if(!this._loaded)return this;e={animate:!1,pan:!0,...e===!0?{animate:!0}:e};let t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;let n=this.getSize(),r=t.divideBy(2).round(),i=n.divideBy(2).round(),a=r.subtract(i);return!a.x&&!a.y?this:(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire(`move`),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(this.fire.bind(this,`moveend`),200)):this.fire(`moveend`)),this.fire(`resize`,{oldSize:t,newSize:n}))},stop(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire(`viewreset`),this._stop()},locate(e){if(e=this._locateOptions={timeout:1e4,watch:!1,...e},!(`geolocation`in navigator))return this._handleGeolocationError({code:0,message:`Geolocation not supported.`}),this;let t=this._handleGeolocationResponse.bind(this),n=this._handleGeolocationError.bind(this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate(){return navigator.geolocation?.clearWatch?.(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError(e){if(!this._container._leaflet_id)return;let t=e.code,n=e.message||(t===1?`permission denied`:t===2?`position unavailable`:`timeout`);this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire(`locationerror`,{code:t,message:`Geolocation error: ${n}.`})},_handleGeolocationResponse(e){if(!this._container._leaflet_id)return;let t=e.coords.latitude,n=e.coords.longitude,r=new b(t,n),i=r.toBounds(e.coords.accuracy*2),a=this._locateOptions;if(a.setView){let e=this.getBoundsZoom(i);this.setView(r,a.maxZoom?Math.min(e,a.maxZoom):e)}let o={latlng:r,bounds:i,timestamp:e.timestamp};for(let t of Object.keys(e.coords))typeof e.coords[t]==`number`&&(o[t]=e.coords[t]);this.fire(`locationfound`,o)},addHandler(e,t){if(!t)return this;let n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove(){if(this._initEvents(!0),this.options.maxBounds&&this.off(`moveend`,this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw Error(`Map container is being reused by another instance`);try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),this._mapPane.remove(),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&=(cancelAnimationFrame(this._resizeRequest),null),this._clearHandlers(),clearTimeout(this._transitionEndTimer),clearTimeout(this._sizeTimer),this._loaded&&this.fire(`unload`),this._destroyAnimProxy();for(let e of Object.values(this._layers))e.remove();for(let e of Object.values(this._panes))e.remove();return this._layers={},this._panes={},delete this._mapPane,delete this._renderer,this},createPane(e,t){let n=`leaflet-pane${e?` leaflet-${e.replace(`Pane`,``)}-pane`:``}`,r=w(`div`,n,t||this._mapPane);return e&&(this._panes[e]=r),r},getCenter(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom(){return this._zoom},getBounds(){let e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new y(t,n)},getMinZoom(){return this.options.minZoom??this._layersMinZoom??0},getMaxZoom(){return this.options.maxZoom??this._layersMaxZoom??1/0},getBoundsZoom(e,t,n){e=new y(e),n=new _(n??[0,0]);let r=this.getZoom()??0,i=this.getMinZoom(),a=this.getMaxZoom(),o=e.getNorthWest(),s=e.getSouthEast(),c=this.getSize().subtract(n),l=new v(this.project(s,r),this.project(o,r)).getSize(),u=this.options.zoomSnap,d=c.x/l.x,f=c.y/l.y,p=t?Math.max(d,f):Math.min(d,f);return r=this.getScaleZoom(p,r),u&&(r=Math.round(r/(u/100))*(u/100),r=t?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(i,Math.min(a,r))},getSize(){return(!this._size||this._sizeChanged)&&(this._size=new _(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds(e,t){let n=this._getTopLeftPoint(e,t);return new v(n,n.add(this.getSize()))},getPixelOrigin(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds(e){return this.options.crs.getProjectedBounds(e??this.getZoom())},getPane(e){return typeof e==`string`?this._panes[e]:e},getPanes(){return this._panes},getContainer(){return this._container},getZoomScale(e,t){let n=this.options.crs;return t??=this._zoom,n.scale(e)/n.scale(t)},getScaleZoom(e,t){let n=this.options.crs;t??=this._zoom;let r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project(e,t){return t??=this._zoom,this.options.crs.latLngToPoint(new b(e),t)},unproject(e,t){return t??=this._zoom,this.options.crs.pointToLatLng(new _(e),t)},layerPointToLatLng(e){let t=new _(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint(e){let t=this.project(new b(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng(e){return this.options.crs.wrapLatLng(new b(e))},wrapLatLngBounds(e){return this.options.crs.wrapLatLngBounds(new y(e))},distance(e,t){return this.options.crs.distance(new b(e),new b(t))},containerPointToLayerPoint(e){return new _(e).subtract(this._getMapPanePos())},layerPointToContainerPoint(e){return new _(e).add(this._getMapPanePos())},containerPointToLatLng(e){let t=this.containerPointToLayerPoint(new _(e));return this.layerPointToLatLng(t)},latLngToContainerPoint(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(new b(e)))},pointerEventToContainerPoint(e){return Ze(e,this._container)},pointerEventToLayerPoint(e){return this.containerPointToLayerPoint(this.pointerEventToContainerPoint(e))},pointerEventToLatLng(e){return this.layerPointToLatLng(this.pointerEventToLayerPoint(e))},_initContainer(e){let t=this._container=ve(e);if(t){if(t._leaflet_id)throw Error(`Map container is already initialized.`)}else throw Error(`Map container not found.`);A(t,`scroll`,this._onScroll,this),this._containerId=r(t),Ie()},_initLayout(){let e=this._container;this._fadeAnimated=this.options.fadeAnimation;let t=[`leaflet-container`];C.touch&&t.push(`leaflet-touch`),C.retina&&t.push(`leaflet-retina`),C.safari&&t.push(`leaflet-safari`),this._fadeAnimated&&t.push(`leaflet-fade-anim`),e.classList.add(...t);let{position:n}=getComputedStyle(e);n!==`absolute`&&n!==`relative`&&n!==`fixed`&&n!==`sticky`&&(e.style.position=`relative`),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes(){let e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane(`mapPane`,this._container),E(this._mapPane,new _(0,0)),this.createPane(`tilePane`),this.createPane(`overlayPane`),this.createPane(`shadowPane`),this.createPane(`markerPane`),this.createPane(`tooltipPane`),this.createPane(`popupPane`),this.options.markerZoomAnimation||(e.markerPane.classList.add(`leaflet-zoom-hide`),e.shadowPane.classList.add(`leaflet-zoom-hide`))},_resetView(e,t,n){E(this._mapPane,new _(0,0));let r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire(`viewprereset`);let i=this._zoom!==t;this._moveStart(i,n)._move(e,t)._moveEnd(i),this.fire(`viewreset`),r&&this.fire(`load`)},_moveStart(e,t){return e&&this.fire(`zoomstart`),t||this.fire(`movestart`),this},_move(e,t,n,r){t===void 0&&(t=this._zoom);let i=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n?.pinch&&this.fire(`zoom`,n):((i||n?.pinch)&&this.fire(`zoom`,n),this.fire(`move`,n)),this},_moveEnd(e){return e&&this.fire(`zoomend`),this.fire(`moveend`)},_stop(){return cancelAnimationFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy(e){E(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded(){if(!this._loaded)throw Error(`Set map center and zoom first.`)},_initEvents(e){this._targets={},this._targets[r(this._container)]=this;let t=e?M:A;t(this._container,`click dblclick pointerdown pointerup pointerover pointerout pointermove contextmenu keypress keydown keyup`,this._handleDOMEvent,this),this.options.trackResize&&(e?this._resizeObserver.disconnect():(this._resizeObserver||=new ResizeObserver(this._onResize.bind(this)),this._resizeObserver.observe(this._container))),this.options.transform3DLimit&&(e?this.off:this.on).call(this,`moveend`,this._onMoveEnd)},_onResize(){cancelAnimationFrame(this._resizeRequest),this._resizeRequest=requestAnimationFrame(()=>{this.invalidateSize({debounceMoveend:!0})})},_onScroll(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd(){let e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets(e,t){let n=[],i,a=e.target||e.srcElement,o=!1,s=t===`pointerout`||t===`pointerover`;for(;a;){if(i=this._targets[r(a)],i&&(t===`click`||t===`preclick`)&&this._draggableMoved(i)){o=!0;break}if(i&&i.listens(t,!0)&&(s&&!et(a,e)||(n.push(i),s))||a===this._container)break;a=a.parentNode}return!n.length&&!o&&!s&&this.listens(t,!0)&&(n=[this]),n},_isClickDisabled(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click||!e.parentNode)return!0;e=e.parentNode}},_handleDOMEvent(e){let t=e.target??e.srcElement;if(!this._loaded||t._leaflet_disable_events||e.type===`click`&&this._isClickDisabled(t))return;let n=e.type;n===`pointerdown`&&je(t),this._fireDOMEvent(e,n)},_pointerEvents:[`click`,`dblclick`,`pointerover`,`pointerout`,`contextmenu`],_fireDOMEvent(e,t,n){t===`click`&&this._fireDOMEvent(e,`preclick`,n);let r=this._findEventTargets(e,t);if(n){let e=n.filter(e=>e.listens(t,!0));r=e.concat(r)}if(!r.length)return;t===`contextmenu`&&P(e);let i=r[0],a={originalEvent:e};if(e.type!==`keypress`&&e.type!==`keydown`&&e.type!==`keyup`){let t=i.getLatLng&&(!i._radius||i._radius<=10);a.containerPoint=t?this.latLngToContainerPoint(i.getLatLng()):this.pointerEventToContainerPoint(e),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=t?i.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(let e of r)if(e.fire(t,a,!0),a.originalEvent._stopped||e.options.bubblingPointerEvents===!1&&this._pointerEvents.includes(t))return},_draggableMoved(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers(){for(let e of this._handlers)e.disable()},whenReady(e,t){return this._loaded?e.call(t||this,{target:this}):this.on(`load`,e,t),this},_getMapPanePos(){return D(this._mapPane)},_moved(){let e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint(e,t){let n=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin(e,t){let n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint(e,t,n){let r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds(e,t,n){let r=this._getNewPixelOrigin(n,t);return new v([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter(e,t,n){if(!n)return e;let r=this.project(e,t),i=this.getSize().divideBy(2),a=new v(r.subtract(i),r.add(i)),o=this._getBoundsOffset(a,n,t);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?e:this.unproject(r.add(o),t)},_limitOffset(e,t){if(!t)return e;let n=this.getPixelBounds(),r=new v(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset(e,t,n){let r=new v(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=r.min.subtract(e.min),a=r.max.subtract(e.max),o=this._rebound(i.x,-a.x),s=this._rebound(i.y,-a.y);return new _(o,s)},_rebound(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom(e){let t=this.getMinZoom(),n=this.getMaxZoom(),r=this.options.zoomSnap;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep(){this.fire(`move`)},_onPanTransitionEnd(){this._mapPane.classList.remove(`leaflet-pan-anim`),this.fire(`moveend`)},_tryAnimatedPan(e,t){let n=this._getCenterOffset(e)._trunc();return t?.animate!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,t),!0)},_createAnimProxy(){this._proxy=w(`div`,`leaflet-proxy leaflet-zoom-animated`),this._panes.mapPane.appendChild(this._proxy),this.on(`zoomanim`,this._animateProxyZoom,this),this.on(`load moveend`,this._animMoveEnd,this),A(this._proxy,`transitionend`,this._catchTransitionEnd,this)},_animateProxyZoom(e){let t=this._proxy.style.transform;T(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),t===this._proxy.style.transform&&this._animatingZoom&&this._onZoomTransitionEnd()},_animMoveEnd(){let e=this.getCenter(),t=this.getZoom();T(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_destroyAnimProxy(){this._proxy&&(M(this._proxy,`transitionend`,this._catchTransitionEnd,this),this._proxy.remove(),this.off(`zoomanim`,this._animateProxyZoom,this),this.off(`load moveend`,this._animMoveEnd,this),delete this._proxy)},_catchTransitionEnd(e){this._animatingZoom&&e.propertyName.includes(`transform`)&&this._onZoomTransitionEnd()},_nothingToAnimate(){return!this._container.getElementsByClassName(`leaflet-zoom-animated`).length},_tryAnimatedZoom(e,t,n){if(this._animatingZoom)return!0;if(n??={},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;let r=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/r);return n.animate!==!0&&!this.getSize().contains(i)?!1:(requestAnimationFrame(()=>{this._moveStart(!0,n.noMoveStart??!1)._animateZoom(e,t,!0)}),!0)},_animateZoom(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,this._mapPane.classList.add(`leaflet-zoom-anim`)),this.fire(`zoomanim`,{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||=this._zoom!==this._animateToZoom,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._transitionEndTimer=setTimeout(this._onZoomTransitionEnd.bind(this),250))},_onZoomTransitionEnd(){this._animatingZoom&&(this._mapPane&&this._mapPane.classList.remove(`leaflet-zoom-anim`),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire(`zoom`),delete this._tempFireZoomEvent,this.fire(`move`),this._moveEnd(!0))}}),R=m.extend({options:{position:`topright`},initialize(e){l(this,e)},getPosition(){return this.options.position},setPosition(e){let t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer(){return this._container},addTo(e){this.remove(),this._map=e;let t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return t.classList.add(`leaflet-control`),n.includes(`bottom`)?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on(`unload`,this.remove,this),this},remove(){return this._map?(this._container.remove(),this.onRemove&&this.onRemove(this._map),this._map.off(`unload`,this.remove,this),this._map=null,this):this},_refocusOnMap(e){this._map&&e&&!(e.screenX===0&&e.screenY===0)&&this._map.getContainer().focus()}});L.include({addControl(e){return e.addTo(this),this},removeControl(e){return e.remove(),this},_initControlPos(){let e=this._controlCorners={},t=`leaflet-`,n=this._controlContainer=w(`div`,`${t}control-container`,this._container);function r(r,i){let a=`${t+r} ${t}${i}`;e[r+i]=w(`div`,a,n)}r(`top`,`left`),r(`top`,`right`),r(`bottom`,`left`),r(`bottom`,`right`)},_clearControlPos(){for(let e of Object.values(this._controlCorners))e.remove();this._controlContainer.remove(),delete this._controlCorners,delete this._controlContainer}});const nt=R.extend({options:{collapsed:!0,position:`topright`,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction(e,t,n,r){return n<r?-1:r<n?1:0}},initialize(e,t,n){l(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(let[t,n]of Object.entries(e??{}))this._addLayer(n,t);for(let[e,n]of Object.entries(t??{}))this._addLayer(n,e,!0)},onAdd(e){this._initLayout(),this._update(),this._map=e,e.on(`zoomend`,this._checkDisabledLayers,this);for(let e of this._layers)e.layer.on(`add remove`,this._onLayerChange,this);return this.options.collapsed||e.on(`resize`,this._expandIfNotCollapsed,this),this._container},addTo(e){return R.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove(){this._map.off(`zoomend`,this._checkDisabledLayers,this);for(let e of this._layers)e.layer.off(`add remove`,this._onLayerChange,this);this._map.off(`resize`,this._expandIfNotCollapsed,this)},addBaseLayer(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer(e){e.off(`add remove`,this._onLayerChange,this);let t=this._getLayer(r(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand(){this._container.classList.add(`leaflet-control-layers-expanded`),this._section.style.height=null;let e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(this._section.classList.add(`leaflet-control-layers-scrollbar`),this._section.style.height=`${e}px`):this._section.classList.remove(`leaflet-control-layers-scrollbar`),this._checkDisabledLayers(),this},collapse(e){return(!e||!((e.type===`pointerleave`||e.type===`pointerout`)&&e.pointerType===`touch`))&&this._container.classList.remove(`leaflet-control-layers-expanded`),this},_initLayout(){let e=`leaflet-control-layers`,t=this._container=w(`div`,e),n=this.options.collapsed;Ye(t),Je(t);let r=this._section=w(`fieldset`,`${e}-list`);n&&(this._map.on(`click`,this.collapse,this),A(t,{pointerenter:this._expandSafely,pointerleave:this.collapse},this));let i=this._layersLink=w(`a`,`${e}-toggle`,t);i.href=`#`,i.title=`Layers`,i.setAttribute(`role`,`button`),A(i,{keydown(e){e.code===`Enter`&&this._expandSafely()},click(e){P(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=w(`div`,`${e}-base`,r),this._separator=w(`div`,`${e}-separator`,r),this._overlaysList=w(`div`,`${e}-overlays`,r),t.appendChild(r)},_getLayer(e){for(let t of this._layers)if(t&&r(t.layer)===e)return t},_addLayer(e,t,n){this._map&&e.on(`add remove`,this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(((e,t)=>this.options.sortFunction(e.layer,t.layer,e.name,t.name))),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update(){if(!this._container)return this;this._baseLayersList.replaceChildren(),this._overlaysList.replaceChildren(),this._layerControlInputs=[];let e,t,n=0;for(let r of this._layers)this._addItem(r),t||=r.overlay,e||=!r.overlay,n+=r.overlay?0:1;return this.options.hideSingleBase&&(e&&=n>1,this._baseLayersList.style.display=e?``:`none`),this._separator.style.display=t&&e?``:`none`,this},_onLayerChange(e){this._handlingClick||this._update();let t=this._getLayer(r(e.target)),n=t.overlay?e.type===`add`?`overlayadd`:`overlayremove`:e.type===`add`?`baselayerchange`:null;n&&this._map.fire(n,t)},_createRadioElement(e,t){let n=`<input type="radio" class="leaflet-control-layers-selector" name="${e}"${t?` checked="checked"`:``}/>`,r=document.createElement(`div`);return r.innerHTML=n,r.firstChild},_addItem(e){let t=document.createElement(`label`),n=this._map.hasLayer(e.layer),i;e.overlay?(i=document.createElement(`input`),i.type=`checkbox`,i.className=`leaflet-control-layers-selector`,i.defaultChecked=n):i=this._createRadioElement(`leaflet-base-layers_${r(this)}`,n),this._layerControlInputs.push(i),i.layerId=r(e.layer),A(i,`click`,this._onInputClick,this);let a=document.createElement(`span`);a.innerHTML=` ${e.name}`;let o=document.createElement(`span`);t.appendChild(o),o.appendChild(i),o.appendChild(a);let s=e.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(t),this._checkDisabledLayers(),t},_onInputClick(e){if(this._preventClick)return;let t=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(let e of t){let t=this._getLayer(e.layerId).layer;e.checked?n.push(t):e.checked||r.push(t)}for(let e of r)this._map.hasLayer(e)&&this._map.removeLayer(e);for(let e of n)this._map.hasLayer(e)||this._map.addLayer(e);this._handlingClick=!1,this._refocusOnMap(e)},_checkDisabledLayers(){let e=this._layerControlInputs,t=this._map.getZoom();for(let n of e){let e=this._getLayer(n.layerId).layer;n.disabled=e.options.minZoom!==void 0&&t<e.options.minZoom||e.options.maxZoom!==void 0&&t>e.options.maxZoom}},_expandIfNotCollapsed(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely(){let e=this._section;this._preventClick=!0,A(e,`click`,P),this.expand(),setTimeout(()=>{M(e,`click`,P),this._preventClick=!1})}}),rt=R.extend({options:{position:`topleft`,zoomInText:`<span aria-hidden="true">+</span>`,zoomInTitle:`Zoom in`,zoomOutText:`<span aria-hidden="true">&#x2212;</span>`,zoomOutTitle:`Zoom out`},onAdd(e){let t=`leaflet-control-zoom`,n=w(`div`,`${t} leaflet-bar`),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,`${t}-in`,n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,`${t}-out`,n,this._zoomOut),this._updateDisabled(),e.on(`zoomend zoomlevelschange`,this._updateDisabled,this),n},onRemove(e){e.off(`zoomend zoomlevelschange`,this._updateDisabled,this)},disable(){return this._disabled=!0,this._updateDisabled(),this},enable(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton(e,t,n,r,i){let a=w(`a`,n,r);return a.innerHTML=e,a.href=`#`,a.title=t,a.setAttribute(`role`,`button`),a.setAttribute(`aria-label`,t),Ye(a),A(a,`click`,F),A(a,`click`,i,this),A(a,`click`,this._refocusOnMap,this),a},_updateDisabled(){let e=this._map,t=`leaflet-disabled`;this._zoomInButton.classList.remove(t),this._zoomOutButton.classList.remove(t),this._zoomInButton.setAttribute(`aria-disabled`,`false`),this._zoomOutButton.setAttribute(`aria-disabled`,`false`),(this._disabled||e._zoom===e.getMinZoom())&&(this._zoomOutButton.classList.add(t),this._zoomOutButton.setAttribute(`aria-disabled`,`true`)),(this._disabled||e._zoom===e.getMaxZoom())&&(this._zoomInButton.classList.add(t),this._zoomInButton.setAttribute(`aria-disabled`,`true`))}});L.mergeOptions({zoomControl:!0}),L.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new rt,this.addControl(this.zoomControl))});const it=R.extend({options:{position:`bottomleft`,maxWidth:100,metric:!0,imperial:!0},onAdd(e){let t=`leaflet-control-scale`,n=w(`div`,t),r=this.options;return this._addScales(r,`${t}-line`,n),e.on(r.updateWhenIdle?`moveend`:`move`,this._update,this),e.whenReady(this._update,this),n},onRemove(e){e.off(this.options.updateWhenIdle?`moveend`:`move`,this._update,this)},_addScales(e,t,n){e.metric&&(this._mScale=w(`div`,t,n)),e.imperial&&(this._iScale=w(`div`,t,n))},_update(){let e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric(e){let t=this._getRoundNum(e),n=t<1e3?`${t} m`:`${t/1e3} km`;this._updateScale(this._mScale,n,t/e)},_updateImperial(e){let t=e*3.2808399,n,r,i;t>5280?(n=t/5280,r=this._getRoundNum(n),this._updateScale(this._iScale,`${r} mi`,r/n)):(i=this._getRoundNum(t),this._updateScale(this._iScale,`${i} ft`,i/t))},_updateScale(e,t,n){e.style.width=`${Math.round(this.options.maxWidth*n)}px`,e.innerHTML=t},_getRoundNum(e){let t=10**(`${Math.floor(e)}`.length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),at=R.extend({options:{position:`bottomright`,prefix:`<a target="_blank" href="https://leafletjs.com" title="A JavaScript library for interactive maps"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>Leaflet</a>`},initialize(e){l(this,e),this._attributions={}},onAdd(e){e.attributionControl=this,this._container=w(`div`,`leaflet-control-attribution`),Ye(this._container);for(let t of Object.values(e._layers))t.getAttribution&&this.addAttribution(t.getAttribution());return this._update(),e.on(`layeradd`,this._addAttribution,this),this._container},onRemove(e){e.off(`layeradd`,this._addAttribution,this)},_addAttribution(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once(`remove`,()=>this.removeAttribution(e.layer.getAttribution())))},setPrefix(e){return this.options.prefix=e,this._update(),this},addAttribution(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution(e){return e&&this._attributions[e]&&(this._attributions[e]--,this._update()),this},_update(){if(!this._map)return;let e=Object.keys(this._attributions).filter(e=>this._attributions[e]),t=[];this.options.prefix&&t.push(this.options.prefix),e.length&&t.push(e.join(`, `)),this._container.innerHTML=t.join(` <span aria-hidden="true">|</span> `)}});L.mergeOptions({attributionControl:!0}),L.addInitHook(function(){this.options.attributionControl&&new at().addTo(this)}),R.Layers=nt,R.Zoom=rt,R.Scale=it,R.Attribution=at;const z=m.extend({initialize(e){this._map=e},enable(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled(){return!!this._enabled}});z.addTo=function(e,t){return e.addHandler(t,this),this};const B=g.extend({options:{clickTolerance:3},initialize(e,t,n,r){l(this,r),this._element=e,this._dragStartTarget=t??e,this._preventOutline=n},enable(){this._enabled||=(A(this._dragStartTarget,`pointerdown`,this._onDown,this),!0)},disable(){this._enabled&&(B._dragging===this&&this.finishDrag(!0),M(this._dragStartTarget,`pointerdown`,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown(e){if(!this._enabled||(this._moved=!1,this._element.classList.contains(`leaflet-zoom-anim`)))return;if(Ve().length!==1){B._dragging===this&&this.finishDrag();return}if(B._dragging||e.shiftKey||e.button!==0&&e.pointerType!==`touch`||(B._dragging=this,this._preventOutline&&je(this._element),De(),Te(),this._moving))return;this.fire(`down`);let t=Ne(this._element);this._startPoint=new _(e.clientX,e.clientY),this._startPos=D(this._element),this._parentScale=Pe(t),A(document,`pointermove`,this._onMove,this),A(document,`pointerup pointercancel`,this._onUp,this)},_onMove(e){if(!this._enabled)return;if(Ve().length>1){this._moved=!0;return}let t=new _(e.clientX,e.clientY)._subtract(this._startPoint);!t.x&&!t.y||Math.abs(t.x)+Math.abs(t.y)<this.options.clickTolerance||(t.x/=this._parentScale.x,t.y/=this._parentScale.y,e.cancelable&&P(e),this._moved||(this.fire(`dragstart`),this._moved=!0,document.body.classList.add(`leaflet-dragging`),this._lastTarget=e.target??e.srcElement,this._lastTarget.classList.add(`leaflet-drag-target`)),this._newPos=this._startPos.add(t),this._moving=!0,this._lastEvent=e,this._updatePosition())},_updatePosition(){let e={originalEvent:this._lastEvent};this.fire(`predrag`,e),E(this._element,this._newPos),this.fire(`drag`,e)},_onUp(){this._enabled&&this.finishDrag()},finishDrag(e){document.body.classList.remove(`leaflet-dragging`),this._lastTarget&&=(this._lastTarget.classList.remove(`leaflet-drag-target`),null),M(document,`pointermove`,this._onMove,this),M(document,`pointerup pointercancel`,this._onUp,this),Oe(),Ee();let t=this._moved&&this._moving;this._moving=!1,B._dragging=!1,t&&this.fire(`dragend`,{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function ot(e,t,n){let r,i,a,o,s,c,l,u,d,f=[1,4,2,8];for(i=0,l=e.length;i<l;i++)e[i]._code=V(e[i],t);for(o=0;o<4;o++){for(u=f[o],r=[],i=0,l=e.length,a=l-1;i<l;a=i++)s=e[i],c=e[a],s._code&u?c._code&u||(d=vt(c,s,u,t,n),d._code=V(d,t),r.push(d)):(c._code&u&&(d=vt(c,s,u,t,n),d._code=V(d,t),r.push(d)),r.push(s));e=r}return e}function st(e,t){let n,r,i,a,o,s,c,l,u;if(!e||e.length===0)throw Error(`latlngs not passed`);H(e)||(console.warn(`latlngs are not flat! Only the first ring will be used`),e=e[0]);let d=new b([0,0]),f=new y(e),p=f.getNorthWest().distanceTo(f.getSouthWest())*f.getNorthEast().distanceTo(f.getNorthWest());p<1700&&(d=ct(e));let m=e.length,h=[];for(n=0;n<m;n++){let r=new b(e[n]);h.push(t.project(new b([r.lat-d.lat,r.lng-d.lng])))}for(s=c=l=0,n=0,r=m-1;n<m;r=n++)i=h[n],a=h[r],o=i.y*a.x-a.y*i.x,c+=(i.x+a.x)*o,l+=(i.y+a.y)*o,s+=o*3;u=s===0?h[0]:[c/s,l/s];let g=t.unproject(new _(u));return new b([g.lat+d.lat,g.lng+d.lng])}function ct(e){let t=0,n=0,r=0;for(let i of e){let e=new b(i);t+=e.lat,n+=e.lng,r++}return new b([t/r,n/r])}var lt={__proto__:null,centroid:ct,clipPolygon:ot,polygonCenter:st};function ut(e,t){if(!t||!e.length)return e.slice();let n=t*t;return e=ht(e,n),e=pt(e,n),e}function dt(e,t,n){return Math.sqrt(bt(e,t,n,!0))}function ft(e,t,n){return bt(e,t,n)}function pt(e,t){let n=e.length,r=typeof Uint8Array<`u`?Uint8Array:Array,i=new r(n);i[0]=i[n-1]=1,mt(e,i,t,0,n-1);let a,o=[];for(a=0;a<n;a++)i[a]&&o.push(e[a]);return o}function mt(e,t,n,r,i){let a=0,o,s,c;for(s=r+1;s<=i-1;s++)c=bt(e[s],e[r],e[i],!0),c>a&&(o=s,a=c);a>n&&(t[o]=1,mt(e,t,n,r,o),mt(e,t,n,o,i))}function ht(e,t){let n=[e[0]],r=0;for(let i=1;i<e.length;i++)yt(e[i],e[r])>t&&(n.push(e[i]),r=i);return r<e.length-1&&n.push(e[e.length-1]),n}let gt;function _t(e,t,n,r,i){let a=r?gt:V(e,n),o=V(t,n),s,c,l;for(gt=o;;){if(!(a|o))return[e,t];if(a&o)return!1;s=a||o,c=vt(e,t,s,n,i),l=V(c,n),s===a?(e=c,a=l):(t=c,o=l)}}function vt(e,t,n,r,i){let a=t.x-e.x,o=t.y-e.y,s=r.min,c=r.max,l,u;return n&8?(l=e.x+a*(c.y-e.y)/o,u=c.y):n&4?(l=e.x+a*(s.y-e.y)/o,u=s.y):n&2?(l=c.x,u=e.y+o*(c.x-e.x)/a):n&1&&(l=s.x,u=e.y+o*(s.x-e.x)/a),new _(l,u,i)}function V(e,t){let n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function yt(e,t){let n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function bt(e,t,n,r){let i=t.x,a=t.y,o=n.x-i,s=n.y-a,c,l=o*o+s*s;return l>0&&(c=((e.x-i)*o+(e.y-a)*s)/l,c>1?(i=n.x,a=n.y):c>0&&(i+=o*c,a+=s*c)),o=e.x-i,s=e.y-a,r?o*o+s*s:new _(i,a)}function H(e){return!Array.isArray(e[0])||typeof e[0][0]!=`object`&&e[0][0]!==void 0}function xt(e,t){let n,r,i,a,o,s,c,l;if(!e||e.length===0)throw Error(`latlngs not passed`);H(e)||(console.warn(`latlngs are not flat! Only the first ring will be used`),e=e[0]);let u=new b([0,0]),d=new y(e),f=d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest());f<1700&&(u=ct(e));let p=e.length,m=[];for(n=0;n<p;n++){let r=new b(e[n]);m.push(t.project(new b([r.lat-u.lat,r.lng-u.lng])))}for(n=0,r=0;n<p-1;n++)r+=m[n].distanceTo(m[n+1])/2;if(r===0)l=m[0];else for(n=0,a=0;n<p-1;n++)if(o=m[n],s=m[n+1],i=o.distanceTo(s),a+=i,a>r){c=(a-r)/i,l=[s.x-c*(s.x-o.x),s.y-c*(s.y-o.y)];break}let h=t.unproject(new _(l));return new b([h.lat+u.lat,h.lng+u.lng])}var St={__proto__:null,_getBitCode:V,_getEdgeIntersection:vt,_sqClosestPointOnSegment:bt,clipSegment:_t,closestPointOnSegment:ft,isFlat:H,pointToSegmentDistance:dt,polylineCenter:xt,simplify:ut};const Ct={project(e){return new _(e.lng,e.lat)},unproject(e){return new b(e.y,e.x)},bounds:new v([-180,-90],[180,90])},wt={R:6378137,R_MINOR:6356752.314245179,bounds:new v([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project(e){let t=Math.PI/180,n=this.R,r=this.R_MINOR/n,i=Math.sqrt(1-r*r),a=e.lat*t,o=i*Math.sin(a),s=Math.tan(Math.PI/4-a/2)/((1-o)/(1+o))**(i/2);return a=-n*Math.log(Math.max(s,1e-10)),new _(e.lng*t*n,a)},unproject(e){let t=180/Math.PI,n=this.R,r=this.R_MINOR/n,i=Math.sqrt(1-r*r),a=Math.exp(-e.y/n),o=Math.PI/2-2*Math.atan(a);for(let e=0,t=.1,n;e<15&&Math.abs(t)>1e-7;e++)n=i*Math.sin(o),n=((1-n)/(1+n))**(i/2),t=Math.PI/2-2*Math.atan(a*n)-o,o+=t;return new b(o*t,e.x*t/n)}};var Tt={__proto__:null,LonLat:Ct,Mercator:wt,SphericalMercator:te},Et=class extends S{static code=`EPSG:3395`;static projection=wt;static transformation=(()=>{let e=.5/(Math.PI*wt.R);return new ne(e,.5,-e,.5)})()},Dt=class extends S{static code=`EPSG:4326`;static projection=Ct;static transformation=new ne(1/180,1,-1/180,.5)},Ot=class extends x{static projection=Ct;static transformation=new ne(1,0,-1,0);static scale(e){return 2**e}static zoom(e){return Math.log(e)/Math.LN2}static distance(e,t){let n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)}static infinite=!0};x.Earth=S,x.EPSG3395=Et,x.EPSG3857=re,x.EPSG900913=ie,x.EPSG4326=Dt,x.Simple=Ot;const U=g.extend({options:{pane:`overlayPane`,attribution:null,bubblingPointerEvents:!0},addTo(e){return e.addLayer(this),this},remove(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom(e){return e&&e.removeLayer(this),this},getPane(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget(e){return this._map._targets[r(e)]=this,this},removeInteractiveTarget(e){return delete this._map._targets[r(e)],this},getAttribution(){return this.options.attribution},_layerAdd(e){let t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){let e=this.getEvents();t.on(e,this),this.once(`remove`,()=>t.off(e,this))}this.onAdd(t),this.fire(`add`),t.fire(`layeradd`,{layer:this})}}});L.include({addLayer(e){if(!e._layerAdd)throw Error(`The provided object is not a Layer.`);let t=r(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer(e){let t=r(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire(`layerremove`,{layer:e}),e.fire(`remove`)),e._map=e._mapToAdd=null,this):this},hasLayer(e){return r(e)in this._layers},eachLayer(e,t){for(let n of Object.values(this._layers))e.call(t,n);return this},_addLayers(e){e=e?Array.isArray(e)?e:[e]:[];for(let t of e)this.addLayer(t)},_addZoomLimit(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[r(e)]=e,this._updateZoomLevels())},_removeZoomLimit(e){let t=r(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels(){let e=1/0,t=-1/0,n=this._getZoomSpan();for(let n of Object.values(this._zoomBoundLayers)){let r=n.options;e=Math.min(e,r.minZoom??1/0),t=Math.max(t,r.maxZoom??-1/0)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire(`zoomlevelschange`),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});const kt=U.extend({initialize(e,t){l(this,t),this._layers={};for(let t of e??[])this.addLayer(t)},addLayer(e){let t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer(e){let t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer(e){let t=typeof e==`number`?e:this.getLayerId(e);return t in this._layers},clearLayers(){return this.eachLayer(this.removeLayer,this)},invoke(e,...t){for(let n of Object.values(this._layers))n[e]&&n[e].apply(n,t);return this},onAdd(e){this.eachLayer(e.addLayer,e)},onRemove(e){this.eachLayer(e.removeLayer,e)},eachLayer(e,t){for(let n of Object.values(this._layers))e.call(t,n);return this},getLayer(e){return this._layers[e]},getLayers(){let e=[];return this.eachLayer(e.push,e),e},setZIndex(e){return this.invoke(`setZIndex`,e)},getLayerId(e){return r(e)}}),W=kt.extend({addLayer(e){return this.hasLayer(e)?this:(e.addEventParent(this),kt.prototype.addLayer.call(this,e),this.fire(`layeradd`,{layer:e}))},removeLayer(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),kt.prototype.removeLayer.call(this,e),this.fire(`layerremove`,{layer:e})):this},setStyle(e){return this.invoke(`setStyle`,e)},bringToFront(){return this.invoke(`bringToFront`)},bringToBack(){return this.invoke(`bringToBack`)},getBounds(){let e=new y;for(let t of Object.values(this._layers))e.extend(t.getBounds?t.getBounds():t.getLatLng());return e}}),At=m.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize(e){l(this,e)},createIcon(e){return this._createIcon(`icon`,e)},createShadow(e){return this._createIcon(`shadow`,e)},_createIcon(e,t){let n=this._getIconUrl(e);if(!n){if(e===`icon`)throw Error(`iconUrl not set in Icon options (see the docs).`);return null}let r=this._createImg(n,t&&t.tagName===`IMG`?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||this.options.crossOrigin===``)&&(r.crossOrigin=this.options.crossOrigin===!0?``:this.options.crossOrigin),r},_setIconStyles(e,t){let n=this.options,r=n[`${t}Size`];typeof r==`number`&&(r=[r,r]);let i=_.validate(r)&&new _(r),a=t===`shadow`&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0),o=_.validate(a)&&new _(a);e.className=`leaflet-marker-${t} ${n.className||``}`,o&&(e.style.marginLeft=`${-o.x}px`,e.style.marginTop=`${-o.y}px`),i&&(e.style.width=`${i.x}px`,e.style.height=`${i.y}px`)},_createImg(e,t){return t??=document.createElement(`img`),t.src=e,t},_getIconUrl(e){return C.retina&&this.options[`${e}RetinaUrl`]||this.options[`${e}Url`]}}),jt=At.extend({options:{iconUrl:`marker-icon.png`,iconRetinaUrl:`marker-icon-2x.png`,shadowUrl:`marker-shadow.png`,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl(e){jt.imagePath||=this._detectIconPath();let t=At.prototype._getIconUrl.call(this,e);return t?(this.options.imagePath||jt.imagePath)+t:null},_stripUrl(e){let t=function(e,t,n){let r=t.exec(e);return r&&r[n]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath(){let e=w(`div`,`leaflet-default-icon-path`,document.body),t=this._stripUrl(getComputedStyle(e).backgroundImage);if(document.body.removeChild(e),t)return t;let n=document.querySelector(`link[href$="leaflet.css"]`);return n?n.href.substring(0,n.href.length-11-1):``}}),Mt=z.extend({initialize(e){this._marker=e},addHooks(){let e=this._marker._icon;this._draggable||=new B(e,e,!0),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),e.classList.add(`leaflet-marker-draggable`)},removeHooks(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&this._marker._icon.classList.remove(`leaflet-marker-draggable`)},moved(){return this._draggable?._moved},_adjustPan(e){let t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,a=D(t._icon),o=n.getPixelBounds(),s=n.getPixelOrigin(),c=new v(o.min._subtract(s).add(i),o.max._subtract(s).subtract(i));if(!c.contains(a)){let i=new _((Math.max(c.max.x,a.x)-c.max.x)/(o.max.x-c.max.x)-(Math.min(c.min.x,a.x)-c.min.x)/(o.min.x-c.min.x),(Math.max(c.max.y,a.y)-c.max.y)/(o.max.y-c.max.y)-(Math.min(c.min.y,a.y)-c.min.y)/(o.min.y-c.min.y)).multiplyBy(r);n.panBy(i,{animate:!1}),this._draggable._newPos._add(i),this._draggable._startPos._add(i),E(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=requestAnimationFrame(this._adjustPan.bind(this,e))}},_onDragStart(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire(`movestart`).fire(`dragstart`)},_onPreDrag(e){this._marker.options.autoPan&&(cancelAnimationFrame(this._panRequest),this._panRequest=requestAnimationFrame(this._adjustPan.bind(this,e)))},_onDrag(e){let t=this._marker,n=t._shadow,r=D(t._icon),i=t._map.layerPointToLatLng(r);n&&E(n,r),t._latlng=i,e.latlng=i,e.oldLatLng=this._oldLatLng,t.fire(`move`,e).fire(`drag`,e)},_onDragEnd(e){cancelAnimationFrame(this._panRequest),delete this._oldLatLng,this._marker.fire(`moveend`).fire(`dragend`,e)}}),Nt=U.extend({options:{icon:new jt,interactive:!0,keyboard:!0,title:``,alt:`Marker`,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:`markerPane`,shadowPane:`shadowPane`,bubblingPointerEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize(e,t){l(this,t),this._latlng=new b(e)},onAdd(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on(`zoomanim`,this._animateZoom,this),this._initIcon(),this.update()},onRemove(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off(`zoomanim`,this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents(){return{zoom:this.update,viewreset:this.update}},getLatLng(){return this._latlng},setLatLng(e){let t=this._latlng;return this._latlng=new b(e),this.update(),this.fire(`move`,{oldLatLng:t,latlng:this._latlng})},setZIndexOffset(e){return this.options.zIndexOffset=e,this.update()},getIcon(){return this.options.icon},setIcon(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement(){return this._icon},update(){if(this._icon&&this._map){let e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon(){let e=this.options,t=`leaflet-zoom-${this._zoomAnimated?`animated`:`hide`}`,n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),n.tagName===`IMG`&&(n.alt=e.alt??``)),n.classList.add(t),e.keyboard&&(n.tabIndex=`0`,n.setAttribute(`role`,`button`)),this._icon=n,e.riseOnHover&&this.on({pointerover:this._bringToFront,pointerout:this._resetZIndex}),this.options.autoPanOnFocus&&A(n,`focus`,this._panOnFocus,this);let i=e.icon.createShadow(this._shadow),a=!1;i!==this._shadow&&(this._removeShadow(),a=!0),i&&(i.classList.add(t),i.alt=``),this._shadow=i,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&a&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon(){this.options.riseOnHover&&this.off({pointerover:this._bringToFront,pointerout:this._resetZIndex}),this.options.autoPanOnFocus&&M(this._icon,`focus`,this._panOnFocus,this),this._icon.remove(),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow(){this._shadow&&this._shadow.remove(),this._shadow=null},_setPos(e){this._icon&&E(this._icon,e),this._shadow&&E(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom(e){let t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction(){if(this.options.interactive&&(this._icon.classList.add(`leaflet-interactive`),this.addInteractiveTarget(this._icon),Mt)){let e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mt(this),e&&this.dragging.enable()}},setOpacity(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity(){let e=this.options.opacity;this._icon&&(this._icon.style.opacity=e),this._shadow&&(this._shadow.style.opacity=e)},_bringToFront(){this._updateZIndex(this.options.riseOffset)},_resetZIndex(){this._updateZIndex(0)},_panOnFocus(){let e=this._map;if(!e)return;let t=this.options.icon.options,n=t.iconSize?new _(t.iconSize):new _(0,0),r=t.iconAnchor?new _(t.iconAnchor):new _(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})},_getPopupAnchor(){return this.options.icon.options.popupAnchor},_getTooltipAnchor(){return this.options.icon.options.tooltipAnchor}}),G=U.extend({options:{stroke:!0,color:`#3388ff`,weight:3,opacity:1,lineCap:`round`,lineJoin:`round`,dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:`evenodd`,interactive:!0,bubblingPointerEvents:!0},beforeAdd(e){this._renderer=e.getRenderer(this)},onAdd(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove(){this._renderer._removePath(this)},redraw(){return this._map&&this._renderer._updatePath(this),this},setStyle(e){return l(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.hasOwn(e,`weight`)&&this._updateBounds()),this},bringToFront(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack(){return this._renderer&&this._renderer._bringToBack(this),this},getElement(){return this._path},_reset(){this._project(),this._update()},_clickTolerance(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pt=G.extend({options:{fill:!0,radius:10},initialize(e,t){l(this,t),this._latlng=new b(e),this._radius=this.options.radius},setLatLng(e){let t=this._latlng;return this._latlng=new b(e),this.redraw(),this.fire(`move`,{oldLatLng:t,latlng:this._latlng})},getLatLng(){return this._latlng},setRadius(e){return this.options.radius=this._radius=e,this.redraw()},getRadius(){return this._radius},setStyle(e){let t=e?.radius??this._radius;return G.prototype.setStyle.call(this,e),this.setRadius(t),this},_project(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds(){let e=this._radius,t=this._radiusY??e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new v(this._point.subtract(r),this._point.add(r))},_update(){this._map&&this._updatePath()},_updatePath(){this._renderer._updateCircle(this)},_empty(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Ft=Pt.extend({initialize(e,t){if(l(this,t),this._latlng=new b(e),isNaN(this.options.radius))throw Error(`Circle radius cannot be NaN`);this._mRadius=this.options.radius},setRadius(e){return this._mRadius=e,this.redraw()},getRadius(){return this._mRadius},getBounds(){let e=[this._radius,this._radiusY??this._radius];return new y(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:G.prototype.setStyle,_project(){let e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===S.distance){let r=Math.PI/180,i=this._mRadius/S.R/r,a=n.project([t+i,e]),o=n.project([t-i,e]),s=a.add(o).divideBy(2),c=n.unproject(s).lat,l=Math.acos((Math.cos(i*r)-Math.sin(t*r)*Math.sin(c*r))/(Math.cos(t*r)*Math.cos(c*r)))/r;(isNaN(l)||l===0)&&(l=i/Math.cos(Math.PI/180*t)),this._point=s.subtract(n.getPixelOrigin()),this._radius=isNaN(l)?0:s.x-n.project([c,e-l]).x,this._radiusY=s.y-a.y}else{let e=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=Math.abs(this._point.x-n.latLngToLayerPoint(e).x)}this._updateBounds()}}),K=G.extend({options:{smoothFactor:1,noClip:!1},initialize(e,t){l(this,t),this._setLatLngs(e)},getLatLngs(){return this._latlngs},setLatLngs(e){return this._setLatLngs(e),this.redraw()},isEmpty(){return!this._latlngs.length},closestLayerPoint(e){let t=1/0,n=null,r,i,a=bt;for(let o of this._parts)for(let s=1,c=o.length;s<c;s++){r=o[s-1],i=o[s];let c=a(e,r,i,!0);c<t&&(t=c,n=a(e,r,i))}return n&&(n.distance=Math.sqrt(t)),n},getCenter(){if(!this._map)throw Error(`Must add layer to map before using getCenter()`);return xt(this._defaultShape(),this._map.options.crs)},getBounds(){return this._bounds},addLatLng(e,t){return t??=this._defaultShape(),e=new b(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs(e){this._bounds=new y,this._latlngs=this._convertLatLngs(e)},_defaultShape(){return H(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs(e){let t=[],n=H(e);for(let r=0,i=e.length;r<i;r++)n?(t[r]=new b(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project(){let e=new v;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds(){let e=this._clickTolerance(),t=new _(e,e);this._rawPxBounds&&(this._pxBounds=new v([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs(e,t,n){let r=e[0]instanceof b;if(r){let r=e.map(e=>this._map.latLngToLayerPoint(e));r.forEach(e=>n.extend(e)),t.push(r)}else e.forEach(e=>this._projectLatlngs(e,t,n))},_clipPoints(){let e=this._renderer._bounds;if(this._parts=[],!this._pxBounds||!this._pxBounds.intersects(e))return;if(this.options.noClip){this._parts=this._rings;return}let t=this._parts,n,r,i,a,o,s,c;for(n=0,i=0,a=this._rings.length;n<a;n++)for(c=this._rings[n],r=0,o=c.length;r<o-1;r++)s=_t(c[r],c[r+1],e,r,!0),s&&(t[i]??=[],t[i].push(s[0]),(s[1]!==c[r+1]||r===o-2)&&(t[i].push(s[1]),i++))},_simplifyPoints(){let e=this._parts,t=this.options.smoothFactor;for(let n=0,r=e.length;n<r;n++)e[n]=ut(e[n],t)},_update(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath(){this._renderer._updatePoly(this)},_containsPoint(e,t){let n,r,i,a,o,s,c=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,a=this._parts.length;n<a;n++)for(s=this._parts[n],r=0,o=s.length,i=o-1;r<o;i=r++)if(!(!t&&r===0)&&dt(e,s[i],s[r])<=c)return!0;return!1}}),It=K.extend({options:{fill:!0},isEmpty(){return!this._latlngs.length||!this._latlngs[0].length},getCenter(){if(!this._map)throw Error(`Must add layer to map before using getCenter()`);return st(this._defaultShape(),this._map.options.crs)},_convertLatLngs(e){let t=K.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof b&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs(e){K.prototype._setLatLngs.call(this,e),H(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape(){return H(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints(){let e=this._renderer._bounds,t=this.options.weight,n=new _(t,t);if(e=new v(e.min.subtract(n),e.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(let t of this._rings){let n=ot(t,e,!0);n.length&&this._parts.push(n)}}},_updatePath(){this._renderer._updatePoly(this,!0)},_containsPoint(e){let t=!1,n,r,i,a,o,s,c,l;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(a=0,c=this._parts.length;a<c;a++)for(n=this._parts[a],o=0,l=n.length,s=l-1;o<l;s=o++)r=n[o],i=n[s],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(t=!t);return t||K.prototype._containsPoint.call(this,e,!0)}}),q=W.extend({initialize(e,t){l(this,t),this._layers={},e&&this.addData(e)},addData(e){let t=Array.isArray(e)?e:e.features;if(t){for(let e of t)(e.geometries||e.geometry||e.features||e.coordinates)&&this.addData(e);return this}let n=this.options;if(n.filter&&!n.filter(e))return this;let r=Lt(e,n);return r?(r.feature=Wt(e),r.defaultOptions=r.options,this.resetStyle(r),n.onEachFeature&&n.onEachFeature(e,r),this.addLayer(r)):this},resetStyle(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=Object.create(e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle(e){return this.eachLayer(t=>this._setLayerStyle(t,e))},_setLayerStyle(e,t){e.setStyle&&(typeof t==`function`&&(t=t(e.feature)),e.setStyle(t))}});function Lt(e,t){let n=e.type===`Feature`?e.geometry:e,r=n?.coordinates,i=[],a=t?.pointToLayer,o=t?.coordsToLatLng??zt,s,c;if(!r&&!n)return null;switch(n.type){case`Point`:return s=o(r),Rt(a,e,s,t);case`MultiPoint`:for(let n of r)s=o(n),i.push(Rt(a,e,s,t));return new W(i);case`LineString`:case`MultiLineString`:return c=Bt(r,n.type===`LineString`?0:1,o),new K(c,t);case`Polygon`:case`MultiPolygon`:return c=Bt(r,n.type===`Polygon`?1:2,o),new It(c,t);case`GeometryCollection`:for(let r of n.geometries){let n=Lt({geometry:r,type:`Feature`,properties:e.properties},t);n&&i.push(n)}return new W(i);case`FeatureCollection`:for(let e of n.features){let n=Lt(e,t);n&&i.push(n)}return new W(i);default:throw Error(`Invalid GeoJSON object.`)}}function Rt(e,t,n,r){return e?e(t,n):new Nt(n,r?.markersInheritOptions&&r)}function zt(e){return new b(e[1],e[0],e[2])}function Bt(e,t,n){return e.map(e=>t?Bt(e,t-1,n):(n||zt)(e))}function Vt(e,t){return e=new b(e),e.alt===void 0?[s(e.lng,t),s(e.lat,t)]:[s(e.lng,t),s(e.lat,t),s(e.alt,t)]}function Ht(e,t,n,r){let i=e.map(e=>t?Ht(e,H(e)?0:t-1,n,r):Vt(e,r));return!t&&n&&i.length>0&&i.push(i[0].slice()),i}function Ut(e,t){return e.feature?{...e.feature,geometry:t}:Wt(t)}function Wt(e){return e.type===`Feature`||e.type===`FeatureCollection`?e:{type:`Feature`,properties:{},geometry:e}}const Gt={toGeoJSON(e){return Ut(this,{type:`Point`,coordinates:Vt(this.getLatLng(),e)})}};Nt.include(Gt),Ft.include(Gt),Pt.include(Gt),K.include({toGeoJSON(e){let t=!H(this._latlngs),n=Ht(this._latlngs,t?1:0,!1,e);return Ut(this,{type:`${t?`Multi`:``}LineString`,coordinates:n})}}),It.include({toGeoJSON(e){let t=!H(this._latlngs),n=t&&!H(this._latlngs[0]),r=Ht(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),Ut(this,{type:`${n?`Multi`:``}Polygon`,coordinates:r})}}),kt.include({toMultiPoint(e){let t=[];return this.eachLayer(n=>{t.push(n.toGeoJSON(e).geometry.coordinates)}),Ut(this,{type:`MultiPoint`,coordinates:t})},toGeoJSON(e){let t=this.feature?.geometry?.type;if(t===`MultiPoint`)return this.toMultiPoint(e);let n=t===`GeometryCollection`,r=[];return this.eachLayer(t=>{if(t.toGeoJSON){let i=t.toGeoJSON(e);if(n)r.push(i.geometry);else{let e=Wt(i);e.type===`FeatureCollection`?r.push.apply(r,e.features):r.push(e)}}}),n?Ut(this,{geometries:r,type:`GeometryCollection`}):{type:`FeatureCollection`,features:r}}});const Kt=U.extend({options:{padding:.1,continuous:!1},initialize(e){l(this,e)},onAdd(){this._container||(this._initContainer(),this._container.classList.add(`leaflet-zoom-animated`)),this.getPane().appendChild(this._container),this._resizeContainer(),this._onMoveEnd()},onRemove(){this._destroyContainer()},getEvents(){let e={viewreset:this._reset,zoom:this._onZoom,moveend:this._onMoveEnd,zoomend:this._onZoomEnd,resize:this._resizeContainer};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),this.options.continuous&&(e.move=this._onMoveEnd),e},_onAnimZoom(e){this._updateTransform(e.center,e.zoom)},_onZoom(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform(e,t){let n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,t),a=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(e,t));T(this._container,a,n)},_onMoveEnd(e){let t=this.options.padding,n=this._map.getSize(),r=this._map.containerPointToLayerPoint(n.multiplyBy(-t)).round();this._bounds=new v(r,r.add(n.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom(),this._updateTransform(this._center,this._zoom),this._onSettled(e)},_reset(){this._onSettled(),this._updateTransform(this._center,this._zoom),this._onViewReset()},_initContainer(){this._container=w(`div`)},_destroyContainer(){M(this._container),this._container.remove(),delete this._container},_resizeContainer(){let e=this.options.padding,t=this._map.getSize().multiplyBy(1+e*2).round();return this._container.style.width=`${t.x}px`,this._container.style.height=`${t.y}px`,t},_onZoomEnd:o,_onViewReset:o,_onSettled:o}),qt=U.extend({options:{opacity:1,alt:``,interactive:!1,crossOrigin:!1,errorOverlayUrl:``,zIndex:1,className:``,decoding:`auto`},initialize(e,t,n){this._url=e,this._bounds=new y(t),l(this,n)},onAdd(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(this._image.classList.add(`leaflet-interactive`),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove(){this._image.remove(),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront(){return this._map&&ye(this._image),this},bringToBack(){return this._map&&be(this._image),this},setUrl(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds(e){return this._bounds=new y(e),this._map&&this._reset(),this},getEvents(){let e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds(){return this._bounds},getElement(){return this._image},_initImage(){let e=this._url.tagName===`IMG`,t=this._image=e?this._url:w(`img`);if(t.classList.add(`leaflet-image-layer`),this._zoomAnimated&&t.classList.add(`leaflet-zoom-animated`),this.options.className&&t.classList.add(...c(this.options.className)),t.onselectstart=o,t.onpointermove=o,t.onload=this.fire.bind(this,`load`),t.onerror=this._overlayOnError.bind(this),(this.options.crossOrigin||this.options.crossOrigin===``)&&(t.crossOrigin=this.options.crossOrigin===!0?``:this.options.crossOrigin),t.decoding=this.options.decoding,this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom(e){let t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;T(this._image,n,t)},_reset(){let e=this._image,t=new v(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();E(e,t.min),e.style.width=`${n.x}px`,e.style.height=`${n.y}px`},_updateOpacity(){this._image.style.opacity=this.options.opacity},_updateZIndex(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError(){this.fire(`error`);let e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter(){return this._bounds.getCenter()}}),Jt=qt.extend({options:{autoplay:!0,controls:!1,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage(){let e=this._url.tagName===`VIDEO`,t=this._image=e?this._url:w(`video`);if(t.classList.add(`leaflet-image-layer`),this._zoomAnimated&&t.classList.add(`leaflet-zoom-animated`),this.options.className&&t.classList.add(...c(this.options.className)),A(t,`pointerdown`,e=>{t.controls&&N(e)}),t.onloadeddata=this.fire.bind(this,`load`),e){let e=t.getElementsByTagName(`source`),n=e.map(e=>e.src);this._url=e.length>0?n:[t.src];return}Array.isArray(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.hasOwn(t.style,`objectFit`)&&(t.style.objectFit=`fill`),t.autoplay=!!this.options.autoplay,t.controls=!!this.options.controls,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(let e of this._url){let n=w(`source`);n.src=e,t.appendChild(n)}}}),Yt=qt.extend({_initImage(){let e=this._image=this._url;e.classList.add(`leaflet-image-layer`),this._zoomAnimated&&e.classList.add(`leaflet-zoom-animated`),this.options.className&&e.classList.add(...c(this.options.className)),e.onselectstart=o,e.onpointermove=o}}),J=U.extend({options:{interactive:!1,offset:[0,0],className:``,pane:void 0,content:``},initialize(e,t){e instanceof b||Array.isArray(e)?(this._latlng=new b(e),l(this,t)):(l(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close(){return this._map&&this._map.removeLayer(this),this},toggle(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&(this._container.style.opacity=0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&(this._container.style.opacity=1),this.bringToFront(),this.options.interactive&&(this._container.classList.add(`leaflet-interactive`),this.addInteractiveTarget(this._container))},onRemove(e){e._fadeAnimated?(this._container.style.opacity=0,this._removeTimeout=setTimeout(()=>this._container.remove(),200)):this._container.remove(),this.options.interactive&&(this._container.classList.remove(`leaflet-interactive`),this.removeInteractiveTarget(this._container))},getLatLng(){return this._latlng},setLatLng(e){return this._latlng=new b(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent(){return this._content},setContent(e){return this._content=e,this.update(),this},getElement(){return this._container},update(){this._map&&(this._container.style.visibility=`hidden`,this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility=``,this._adjustPan())},getEvents(){let e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen(){return!!this._map&&this._map.hasLayer(this)},bringToFront(){return this._map&&ye(this._container),this},bringToBack(){return this._map&&be(this._container),this},_prepareOpen(e){let t=this._source;if(!t._map)return!1;if(t instanceof W){t=null;for(let e of Object.values(this._source._layers))if(e._map){t=e;break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw Error(`Unable to get source layer LatLng.`);return this.setLatLng(e),this._map&&this.update(),!0},_updateContent(){if(!this._content)return;let e=this._contentNode,t=typeof this._content==`function`?this._content(this._source??this):this._content;if(typeof t==`string`)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire(`contentupdate`)},_updatePosition(){if(!this._map)return;let e=this._map.latLngToLayerPoint(this._latlng),t=this._getAnchor(),n=new _(this.options.offset);this._zoomAnimated?E(this._container,e.add(t)):n=n.add(e).add(t);let r=this._containerBottom=-n.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=`${r}px`,this._container.style.left=`${i}px`},_getAnchor(){return[0,0]}});L.include({_initOverlay(e,t,n,r){let i=t;return i instanceof e||(i=new e(r).setContent(t)),n&&i.setLatLng(n),i}}),U.include({_initOverlay(e,t,n,r){let i=n;return i instanceof e?(l(i,r),i._source=this):(i=t&&!r?t:new e(r,this),i.setContent(n)),i}});const Xt=J.extend({options:{pane:`popupPane`,offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,closeButtonLabel:`Close popup`,autoClose:!0,closeOnEscapeKey:!0,className:``,trackResize:!0},openOn(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,J.prototype.openOn.call(this,e)},onAdd(e){J.prototype.onAdd.call(this,e),e.fire(`popupopen`,{popup:this}),this._source&&(this._source.fire(`popupopen`,{popup:this},!0),this._source instanceof G||this._source.on(`preclick`,N))},onRemove(e){J.prototype.onRemove.call(this,e),e.fire(`popupclose`,{popup:this}),this._source&&(this._source.fire(`popupclose`,{popup:this},!0),this._source instanceof G||this._source.off(`preclick`,N))},getEvents(){let e=J.prototype.getEvents.call(this);return(this.options.closeOnClick??this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout(){let e=`leaflet-popup`,t=this._container=w(`div`,`${e} ${this.options.className||``} leaflet-zoom-animated`),n=this._wrapper=w(`div`,`${e}-content-wrapper`,t);if(this._contentNode=w(`div`,`${e}-content`,n),Ye(t),Je(this._contentNode),A(t,`contextmenu`,N),this._tipContainer=w(`div`,`${e}-tip-container`,t),this._tip=w(`div`,`${e}-tip`,this._tipContainer),this.options.closeButton){let n=this._closeButton=w(`a`,`${e}-close-button`,t);n.setAttribute(`role`,`button`),n.setAttribute(`aria-label`,this.options.closeButtonLabel),n.href=`#close`,n.innerHTML=`<span aria-hidden="true">&#215;</span>`,A(n,`click`,e=>{P(e),this.close()})}this.options.trackResize&&(this._resizeObserver=new ResizeObserver((e=>{this._map&&(this._containerWidth=e[0]?.contentRect?.width,this._containerHeight=e[0]?.contentRect?.height,this._updateLayout(),this._updatePosition(),this._adjustPan())})),this._resizeObserver.observe(this._contentNode))},_updateLayout(){let e=this._contentNode,t=e.style;t.width=``,t.whiteSpace=`nowrap`,t.maxWidth=`${this.options.maxWidth}px`,t.minWidth=`${this.options.minWidth}px`,t.whiteSpace=``,t.height=``;let n=this._containerHeight??e.offsetHeight,r=this.options.maxHeight,i=`leaflet-popup-scrolled`;r&&n>r?(t.height=`${r}px`,e.classList.add(i)):e.classList.remove(i),this._containerWidth=this._container.offsetWidth,this._containerHeight=this._container.offsetHeight},_animateZoom(e){let t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();E(this._container,t.add(n))},_adjustPan(){if(!this.options.autoPan)return;if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}let e=this._map,t=parseInt(getComputedStyle(this._container).marginBottom,10)||0,n=this._containerHeight+t,r=this._containerWidth,i=new _(this._containerLeft,-n-this._containerBottom);i._add(D(this._container));let a=e.layerPointToContainerPoint(i),o=new _(this.options.autoPanPadding),s=new _(this.options.autoPanPaddingTopLeft??o),c=new _(this.options.autoPanPaddingBottomRight??o),l=e.getSize(),u=0,d=0;a.x+r+c.x>l.x&&(u=a.x+r-l.x+c.x),a.x-u-s.x<0&&(u=a.x-s.x),a.y+n+c.y>l.y&&(d=a.y+n-l.y+c.y),a.y-d-s.y<0&&(d=a.y-s.y),(u||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire(`autopanstart`).panBy([u,d]))},_getAnchor(){return new _(this._source?._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});L.mergeOptions({closePopupOnClick:!0}),L.include({openPopup(e,t,n){return this._initOverlay(Xt,e,t,n).openOn(this),this},closePopup(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),U.include({bindPopup(e,t){return this._popup=this._initOverlay(Xt,this._popup,e,t),this._popupHandlersAdded||=(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),!0),this},unbindPopup(){return this._popup&&=(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,null),this},openPopup(e){return this._popup&&(this instanceof W||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup(){return this._popup&&this._popup.close(),this},togglePopup(){return this._popup&&this._popup.toggle(this),this},isPopupOpen(){return this._popup?this._popup.isOpen():!1},setPopupContent(e){return this._popup&&this._popup.setContent(e),this},getPopup(){return this._popup},_openPopup(e){if(!this._popup||!this._map)return;F(e);let t=e.propagatedFrom??e.target;if(this._popup._source===t&&!(t instanceof G)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)},_movePopup(e){this._popup.setLatLng(e.latlng)},_onKeyPress(e){e.originalEvent.code===`Enter`&&this._openPopup(e)}});const Zt=J.extend({options:{pane:`tooltipPane`,offset:[0,0],direction:`auto`,permanent:!1,sticky:!1,opacity:.9},onAdd(e){J.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire(`tooltipopen`,{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire(`tooltipopen`,{tooltip:this},!0))},onRemove(e){J.prototype.onRemove.call(this,e),e.fire(`tooltipclose`,{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire(`tooltipclose`,{tooltip:this},!0))},getEvents(){let e=J.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout(){let e=`leaflet-tooltip ${this.options.className||``} leaflet-zoom-${this._zoomAnimated?`animated`:`hide`}`;this._contentNode=this._container=w(`div`,e),this._container.setAttribute(`role`,`tooltip`),this._container.setAttribute(`id`,`leaflet-tooltip-${r(this)}`)},_updateLayout(){},_adjustPan(){},_setPosition(e){let t,n,r=this.options.direction,i=this._map,a=this._container,o=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(e),c=a.offsetWidth,l=a.offsetHeight,u=new _(this.options.offset),d=this._getAnchor();r===`top`?(t=c/2,n=l):r===`bottom`?(t=c/2,n=0):r===`center`?(t=c/2,n=l/2):r===`right`?(t=0,n=l/2):r===`left`?(t=c,n=l/2):s.x<o.x?(r=`right`,t=0,n=l/2):(r=`left`,t=c+(u.x+d.x)*2,n=l/2),e=e.subtract(new _(t,n,!0)).add(u).add(d),a.classList.remove(`leaflet-tooltip-right`,`leaflet-tooltip-left`,`leaflet-tooltip-top`,`leaflet-tooltip-bottom`),a.classList.add(`leaflet-tooltip-${r}`),E(a,e)},_updatePosition(){let e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity(e){this.options.opacity=e,this._container&&(this._container.style.opacity=e)},_animateZoom(e){let t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor(){return new _(this._source?._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});L.include({openTooltip(e,t,n){return this._initOverlay(Zt,e,t,n).openOn(this),this},closeTooltip(e){return e.close(),this}}),U.include({bindTooltip(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zt,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip(){return this._tooltip&&=(this._initTooltipInteractions(!0),this.closeTooltip(),null),this},_initTooltipInteractions(e){if(!e&&this._tooltipHandlersAdded)return;let t=e?`off`:`on`,n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.pointerover=this._openTooltip,n.pointerout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners(e):n.add=()=>this._addFocusListeners(e)),this._tooltip.options.sticky&&(n.pointermove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e},openTooltip(e){return this._tooltip&&(this instanceof W||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip(){if(this._tooltip)return this._tooltip.close()},toggleTooltip(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen(){return this._tooltip.isOpen()},setTooltipContent(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip(){return this._tooltip},_addFocusListeners(e){this.getElement?this._addFocusListenersOnLayer(this,e):this.eachLayer&&this.eachLayer(t=>this._addFocusListenersOnLayer(t,e),this)},_addFocusListenersOnLayer(e,t){let n=typeof e.getElement==`function`&&e.getElement();if(n){let r=t?`off`:`on`;t||(n._leaflet_focus_handler&&M(n,`focus`,n._leaflet_focus_handler,this),n._leaflet_focus_handler=()=>{this._tooltip&&(this._tooltip._source=e,this.openTooltip())}),n._leaflet_focus_handler&&I[r](n,`focus`,n._leaflet_focus_handler,this),I[r](n,`blur`,this.closeTooltip,this),t&&delete n._leaflet_focus_handler}},_setAriaDescribedByOnLayer(e){let t=typeof e.getElement==`function`&&e.getElement();t&&t.setAttribute(`aria-describedby`,this._tooltip._container.id)},_openTooltip(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()){e.type===`add`&&!this._moveEndOpensTooltip&&(this._moveEndOpensTooltip=!0,this._map.once(`moveend`,()=>{this._moveEndOpensTooltip=!1,this._openTooltip(e)}));return}this._tooltip._source=e.propagatedFrom??e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip(e){let t=e.latlng,n,r;this._tooltip.options.sticky&&e.originalEvent&&(n=this._map.pointerEventToContainerPoint(e.originalEvent),r=this._map.containerPointToLayerPoint(n),t=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(t)}});const Qt=At.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:`leaflet-div-icon`},createIcon(e){let t=e&&e.tagName===`DIV`?e:document.createElement(`div`),n=this.options;if(n.html instanceof Element?(t.replaceChildren(),t.appendChild(n.html)):t.innerHTML=n.html===!1?``:n.html,n.bgPos){let e=new _(n.bgPos);t.style.backgroundPosition=`${-e.x}px ${-e.y}px`}return this._setIconStyles(t,`icon`),t},createShadow(){return null}});At.Default=jt;const $t=U.extend({options:{tileSize:256,opacity:1,updateWhenIdle:C.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:`tilePane`,className:``,keepBuffer:2},initialize(e){l(this,e)},onAdd(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd(e){e._addZoomLimit(this)},onRemove(e){this._removeAllTiles(),this._container.remove(),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0,clearTimeout(this._pruneTimeout)},bringToFront(){return this._map&&(ye(this._container),this._setAutoZIndex(Math.max)),this},bringToBack(){return this._map&&(be(this._container),this._setAutoZIndex(Math.min)),this},getContainer(){return this._container},setOpacity(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading(){return this._loading},redraw(){if(this._map){this._removeAllTiles();let e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents(){let e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||=i(this._onMoveEnd,this.options.updateInterval,this),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile(){return document.createElement(`div`)},getTileSize(){let e=this.options.tileSize;return e instanceof _?e:new _(e,e)},_updateZIndex(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex(e){let t=this.getPane().children,n=-e(-1/0,1/0);for(let r of t){let t=r.style.zIndex;r!==this._container&&t&&(n=e(n,+t))}isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity(){if(!this._map)return;this._container.style.opacity=this.options.opacity;let e=+new Date,t=!1,n=!1;for(let r of Object.values(this._tiles??{})){if(!r.current||!r.loaded)continue;let i=Math.min(1,(e-r.loaded)/200);r.el.style.opacity=i,i<1?t=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}n&&!this._noPrune&&this._pruneTiles(),t&&(cancelAnimationFrame(this._fadeFrame),this._fadeFrame=requestAnimationFrame(this._updateOpacity.bind(this)))},_onOpaqueTile:o,_initContainer(){this._container||(this._container=w(`div`,`leaflet-layer ${this.options.className??``}`),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels(){let e=this._tileZoom,t=this.options.maxZoom;if(e===void 0)return;for(let n of Object.keys(this._levels))n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(this._levels[n].el.remove(),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);let n=this._levels[e],r=this._map;return n||(n=this._levels[e]={},n.el=w(`div`,`leaflet-tile-container leaflet-zoom-animated`,this._container),n.el.style.zIndex=t,n.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),n.zoom=e,this._setZoomTransform(n,r.getCenter(),r.getZoom()),o(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n},_onUpdateLevel:o,_onRemoveLevel:o,_onCreateLevel:o,_pruneTiles(){if(!this._map)return;let e=this._map.getZoom();if(e>this.options.maxZoom||e<this.options.minZoom){this._removeAllTiles();return}for(let e of Object.values(this._tiles))e.retain=e.current;for(let e of Object.values(this._tiles))if(e.current&&!e.active){let t=e.coords;this._retainParent(t.x,t.y,t.z,t.z-5)||this._retainChildren(t.x,t.y,t.z,t.z+2)}for(let[e,t]of Object.entries(this._tiles))t.retain||this._removeTile(e)},_removeTilesAtZoom(e){for(let[t,n]of Object.entries(this._tiles))n.coords.z===e&&this._removeTile(t)},_removeAllTiles(){for(let e of Object.keys(this._tiles))this._removeTile(e)},_invalidateAll(){for(let e of Object.keys(this._levels))this._levels[e].el.remove(),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent(e,t,n,r){let i=Math.floor(e/2),a=Math.floor(t/2),o=n-1,s=new _(+i,+a);s.z=+o;let c=this._tileCoordsToKey(s),l=this._tiles[c];return l?.active?(l.retain=!0,!0):(l?.loaded&&(l.retain=!0),o>r?this._retainParent(i,a,o,r):!1)},_retainChildren(e,t,n,r){for(let i=2*e;i<2*e+2;i++)for(let e=2*t;e<2*t+2;e++){let t=new _(i,e);t.z=n+1;let a=this._tileCoordsToKey(t),o=this._tiles[a];if(o?.active){o.retain=!0;continue}else o?.loaded&&(o.retain=!0);n+1<r&&this._retainChildren(i,e,n+1,r)}},_resetView(e){let t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom(e){let t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView(e,t,n,r){let i=Math.round(t);i=this.options.maxZoom!==void 0&&i>this.options.maxZoom||this.options.minZoom!==void 0&&i<this.options.minZoom?void 0:this._clampZoom(i);let a=this.options.updateWhenZooming&&i!==this._tileZoom;(!r||a)&&(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),i!==void 0&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms(e,t){for(let n of Object.values(this._levels))this._setZoomTransform(n,e,t)},_setZoomTransform(e,t,n){let r=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();T(e.el,i,r)},_resetGrid(){let e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds(e){let t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),a=t.getSize().divideBy(r*2);return new v(i.subtract(a),i.add(a))},_update(e){let t=this._map;if(!t)return;let n=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom===void 0)return;let r=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(r),a=i.getCenter(),o=[],s=this.options.keepBuffer,c=new v(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw Error(`Attempted to load an infinite number of tiles`);for(let e of Object.values(this._tiles)){let t=e.coords;(t.z!==this._tileZoom||!c.contains(new _(t.x,t.y)))&&(e.current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(e,n);return}for(let e=i.min.y;e<=i.max.y;e++)for(let t=i.min.x;t<=i.max.x;t++){let n=new _(t,e);if(n.z=this._tileZoom,!this._isValidTile(n))continue;let r=this._tiles[this._tileCoordsToKey(n)];r?r.current=!0:o.push(n)}if(o.sort((e,t)=>e.distanceTo(a)-t.distanceTo(a)),o.length!==0){this._loading||(this._loading=!0,this.fire(`loading`));let e=document.createDocumentFragment();for(let t of o)this._addTile(t,e);this._level.el.appendChild(e)}},_isValidTile(e){let t=this._map.options.crs;if(!t.infinite){let n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;let n=this._tileCoordsToBounds(e);return new y(this.options.bounds).overlaps(n)},_keyToBounds(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe(e){let t=this._map,n=this.getTileSize(),r=e.scaleBy(n),i=r.add(n),a=t.unproject(r,e.z),o=t.unproject(i,e.z);return[a,o]},_tileCoordsToBounds(e){let t=this._tileCoordsToNwSe(e),n=new y(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey(e){return`${e.x}:${e.y}:${e.z}`},_keyToTileCoords(e){let t=e.split(`:`),n=new _(+t[0],+t[1]);return n.z=+t[2],n},_removeTile(e){let t=this._tiles[e];t&&(t.el.remove(),delete this._tiles[e],this.fire(`tileunload`,{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile(e){e.classList.add(`leaflet-tile`);let t=this.getTileSize();e.style.width=`${t.x}px`,e.style.height=`${t.y}px`,e.onselectstart=o,e.onpointermove=o},_addTile(e,t){let n=this._getTilePos(e),r=this._tileCoordsToKey(e),i=this.createTile(this._wrapCoords(e),this._tileReady.bind(this,e));this._initTile(i),this.createTile.length<2&&requestAnimationFrame(this._tileReady.bind(this,e,null,i)),E(i,n),this._tiles[r]={el:i,coords:e,current:!0},t.appendChild(i),this.fire(`tileloadstart`,{tile:i,coords:e})},_tileReady(e,t,n){t&&this.fire(`tileerror`,{error:t,tile:n,coords:e});let r=this._tileCoordsToKey(e);n=this._tiles[r],n&&(n.loaded=+new Date,this._map._fadeAnimated?(n.el.style.opacity=0,cancelAnimationFrame(this._fadeFrame),this._fadeFrame=requestAnimationFrame(this._updateOpacity.bind(this))):(n.active=!0,this._pruneTiles()),t||(n.el.classList.add(`leaflet-tile-loaded`),this.fire(`tileload`,{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire(`load`),this._map._fadeAnimated?this._pruneTimeout=setTimeout(this._pruneTiles.bind(this),250):requestAnimationFrame(this._pruneTiles.bind(this))))},_getTilePos(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords(e){let t=new _(this._wrapX?a(e.x,this._wrapX):e.x,this._wrapY?a(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange(e){let t=this.getTileSize();return new v(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad(){return Object.values(this._tiles).every(e=>e.loaded)}}),Y=$t.extend({options:{minZoom:0,maxZoom:18,subdomains:`abc`,errorTileUrl:``,zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize(e,t){if(this._url=e,t=l(this,t),t.attribution===null&&URL.canParse(e)){let n=new URL(e).hostname,r=[`tile.openstreetmap.org`,`tile.osm.org`];r.some(e=>n.endsWith(e))&&(t.attribution=`&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors`)}t.detectRetina&&C.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains==`string`&&(t.subdomains=t.subdomains.split(``)),this.on(`tileunload`,this._onTileRemove)},setUrl(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile(e,t){let n=document.createElement(`img`);return A(n,`load`,this._tileOnLoad.bind(this,t,n)),A(n,`error`,this._tileOnError.bind(this,t,n)),(this.options.crossOrigin||this.options.crossOrigin===``)&&(n.crossOrigin=this.options.crossOrigin===!0?``:this.options.crossOrigin),typeof this.options.referrerPolicy==`string`&&(n.referrerPolicy=this.options.referrerPolicy),n.alt=``,n.src=this.getTileUrl(e),n},getTileUrl(e){let t={...this.options,r:C.retina?`@2x`:``,s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){let n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t[`-y`]=n}return d(this._url,t)},_tileOnLoad(e,t){e(null,t)},_tileOnError(e,t,n){let r=this.options.errorTileUrl;r&&t.getAttribute(`src`)!==r&&(t.src=r),e(n,t)},_onTileRemove(e){e.tile.onload=null},_getZoomForUrl(){let e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(e=t-e),e+r},_getSubdomain(e){let t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading(){let e,t;for(e of Object.keys(this._tiles))if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=o,t.onerror=o,!t.complete)){t.src=f;let n=this._tiles[e].coords;t.remove(),delete this._tiles[e],this.fire(`tileabort`,{tile:t,coords:n})}},_removeTile(e){let t=this._tiles[e];if(t)return t.el.setAttribute(`src`,f),$t.prototype._removeTile.call(this,e)},_tileReady(e,t,n){if(!(!this._map||n&&n.getAttribute(`src`)===f))return $t.prototype._tileReady.call(this,e,t,n)},_clampZoom(e){return Math.round($t.prototype._clampZoom.call(this,e))}}),en=Y.extend({defaultWmsParams:{service:`WMS`,request:`GetMap`,layers:``,styles:``,format:`image/jpeg`,transparent:!1,version:`1.1.1`},options:{crs:null,uppercase:!1},initialize(e,t){this._url=e;let n={...this.defaultWmsParams};for(let e of Object.keys(t))e in this.options||(n[e]=t[e]);t=l(this,t);let r=t.detectRetina&&C.retina?2:1,i=this.getTileSize();n.width=i.x*r,n.height=i.y*r,this.wmsParams=n},onAdd(e){this._crs=this.options.crs??e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);let t=this._wmsVersion>=1.3?`crs`:`srs`;this.wmsParams[t]=this._crs.code,Y.prototype.onAdd.call(this,e)},getTileUrl(e){let t=this._tileCoordsToNwSe(e),n=this._crs,r=new v(n.project(t[0]),n.project(t[1])),i=r.min,a=r.max,o=(this._wmsVersion>=1.3&&this._crs===Dt?[i.y,i.x,a.y,a.x]:[i.x,i.y,a.x,a.y]).join(`,`),s=new URL(Y.prototype.getTileUrl.call(this,e));for(let[e,t]of Object.entries({...this.wmsParams,bbox:o}))s.searchParams.append(this.options.uppercase?e.toUpperCase():e,t);return s.toString()},setParams(e,t){return Object.assign(this.wmsParams,e),t||this.redraw(),this}});Y.WMS=en;const X=Kt.extend({initialize(e){l(this,{...e,continuous:!1}),r(this),this._layers??={}},onAdd(e){Kt.prototype.onAdd.call(this,e),this.on(`update`,this._updatePaths,this)},onRemove(){Kt.prototype.onRemove.call(this),this.off(`update`,this._updatePaths,this)},_onZoomEnd(){for(let e of Object.values(this._layers))e._project()},_updatePaths(){for(let e of Object.values(this._layers))e._update()},_onViewReset(){for(let e of Object.values(this._layers))e._reset()},_onSettled(){this._update()},_update:o}),tn=X.extend({options:{tolerance:0},getEvents(){let e=X.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset(){this._postponeUpdatePaths=!0},onAdd(e){X.prototype.onAdd.call(this,e),this._draw()},onRemove(){X.prototype.onRemove.call(this),clearTimeout(this._pointerHoverThrottleTimeout)},_initContainer(){let e=this._container=document.createElement(`canvas`);A(e,`pointermove`,this._onPointerMove,this),A(e,`click dblclick pointerdown pointerup contextmenu`,this._onClick,this),A(e,`pointerout`,this._handlePointerOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext(`2d`)},_destroyContainer(){cancelAnimationFrame(this._redrawRequest),this._redrawRequest=null,delete this._ctx,X.prototype._destroyContainer.call(this)},_resizeContainer(){let e=X.prototype._resizeContainer.call(this),t=this._ctxScale=window.devicePixelRatio;this._container.width=t*e.x,this._container.height=t*e.y},_updatePaths(){if(!this._postponeUpdatePaths){this._redrawBounds=null;for(let e of Object.values(this._layers))e._update();this._redraw()}},_update(){if(this._map._animatingZoom&&this._bounds)return;let e=this._bounds,t=this._ctxScale;this._ctx.setTransform(t,0,0,t,-e.min.x*t,-e.min.y*t),this.fire(`update`)},_reset(){X.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath(e){this._updateDashArray(e),this._layers[r(e)]=e;let t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst??=this._drawLast},_addPath(e){this._requestRedraw(e)},_removePath(e){let t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[r(e)],this._requestRedraw(e)},_updatePath(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray(e){if(typeof e.options.dashArray==`string`){let t=e.options.dashArray.split(/[, ]+/);e.options._dashArray=t.map(e=>Number(e)).filter(e=>!isNaN(e))}else e.options._dashArray=e.options.dashArray},_requestRedraw(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest??=requestAnimationFrame(this._redraw.bind(this)))},_extendRedrawBounds(e){if(e._pxBounds){let t=(e.options.weight??0)+1;this._redrawBounds??=new v,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear(){let e=this._redrawBounds;if(e){let t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw(){let e,t=this._redrawBounds;if(this._ctx.save(),t){let e=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,e.x,e.y),this._ctx.clip()}this._drawing=!0;for(let n=this._drawFirst;n;n=n.next)e=n.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly(e,t){if(!this._drawing)return;let n=e._parts,r=this._ctx;n.length&&(r.beginPath(),n.forEach(e=>{e.forEach((e,t)=>{r[t?`lineTo`:`moveTo`](e.x,e.y)}),t&&r.closePath()}),this._fillStroke(r,e))},_updateCircle(e){if(!this._drawing||e._empty())return;let t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),i=(Math.max(Math.round(e._radiusY),1)||r)/r;i!==1&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,Math.PI*2,!1),i!==1&&n.restore(),this._fillStroke(n,e)},_fillStroke(e,t){let n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor??n.color,e.fill(n.fillRule||`evenodd`)),n.stroke&&n.weight!==0&&(e.setLineDash&&(e.lineDashOffset=Number(n.dashOffset??0),e.setLineDash(n._dashArray??[])),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick(e){let t=this._map.pointerEventToLayerPoint(e),n,r;for(let i=this._drawFirst;i;i=i.next)n=i.layer,n.options.interactive&&n._containsPoint(t)&&(!(e.type===`click`||e.type===`preclick`)||!this._map._draggableMoved(n))&&(r=n);this._fireEvent(r?[r]:!1,e)},_onPointerMove(e){if(!this._map||this._map.dragging.moving()||this._map._animatingZoom)return;let t=this._map.pointerEventToLayerPoint(e);this._handlePointerHover(e,t)},_handlePointerOut(e){let t=this._hoveredLayer;t&&(this._container.classList.remove(`leaflet-interactive`),this._fireEvent([t],e,`pointerout`),this._hoveredLayer=null,this._pointerHoverThrottled=!1)},_handlePointerHover(e,t){if(this._pointerHoverThrottled)return;let n,r;for(let e=this._drawFirst;e;e=e.next)n=e.layer,n.options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handlePointerOut(e),r&&(this._container.classList.add(`leaflet-interactive`),this._fireEvent([r],e,`pointerover`),this._hoveredLayer=r)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._pointerHoverThrottled=!0,this._pointerHoverThrottleTimeout=setTimeout((()=>{this._pointerHoverThrottled=!1}),32)},_fireEvent(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront(e){let t=e._order;if(!t)return;let n=t.next,r=t.prev;if(n)n.prev=r;else return;r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)},_bringToBack(e){let t=e._order;if(!t)return;let n=t.next,r=t.prev;if(r)r.next=n;else return;n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}});function nn(e){return document.createElementNS(`http://www.w3.org/2000/svg`,e)}function rn(e,t){let n=e.flatMap(e=>[...e.map((e,t)=>`${(t?`L`:`M`)+e.x} ${e.y}`),t?`z`:``]).join(``);return n||`M0 0`}const an=nn,on=X.extend({_initContainer(){this._container=an(`svg`),this._container.setAttribute(`pointer-events`,`none`),this._rootGroup=an(`g`),this._container.appendChild(this._rootGroup)},_destroyContainer(){X.prototype._destroyContainer.call(this),delete this._rootGroup,delete this._svgSize},_resizeContainer(){let e=X.prototype._resizeContainer.call(this);(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,this._container.setAttribute(`width`,e.x),this._container.setAttribute(`height`,e.y))},_update(){if(this._map._animatingZoom&&this._bounds)return;let e=this._bounds,t=e.getSize(),n=this._container;n.setAttribute(`viewBox`,[e.min.x,e.min.y,t.x,t.y].join(` `)),this.fire(`update`)},_initPath(e){let t=e._path=an(`path`);e.options.className&&t.classList.add(...c(e.options.className)),e.options.interactive&&t.classList.add(`leaflet-interactive`),this._updateStyle(e),this._layers[r(e)]=e},_addPath(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath(e){e._path.remove(),e.removeInteractiveTarget(e._path),delete this._layers[r(e)]},_updatePath(e){e._project(),e._update()},_updateStyle(e){let t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute(`stroke`,n.color),t.setAttribute(`stroke-opacity`,n.opacity),t.setAttribute(`stroke-width`,n.weight),t.setAttribute(`stroke-linecap`,n.lineCap),t.setAttribute(`stroke-linejoin`,n.lineJoin),n.dashArray?t.setAttribute(`stroke-dasharray`,n.dashArray):t.removeAttribute(`stroke-dasharray`),n.dashOffset?t.setAttribute(`stroke-dashoffset`,n.dashOffset):t.removeAttribute(`stroke-dashoffset`)):t.setAttribute(`stroke`,`none`),n.fill?(t.setAttribute(`fill`,n.fillColor||n.color),t.setAttribute(`fill-opacity`,n.fillOpacity),t.setAttribute(`fill-rule`,n.fillRule||`evenodd`)):t.setAttribute(`fill`,`none`))},_updatePoly(e,t){this._setPath(e,rn(e._parts,t))},_updateCircle(e){let t=e._point,n=Math.max(Math.round(e._radius),1),r=Math.max(Math.round(e._radiusY),1)||n,i=`a${n},${r} 0 1,0 `,a=e._empty()?`M0 0`:`M${t.x-n},${t.y}${i}${n*2},0 ${i}${-n*2},0 `;this._setPath(e,a)},_setPath(e,t){e._path.setAttribute(`d`,t)},_bringToFront(e){ye(e._path)},_bringToBack(e){be(e._path)}});L.include({getRenderer(e){let t=e.options.renderer??this._getPaneRenderer(e.options.pane)??this.options.renderer??this._renderer;return t||=this._renderer=this._createRenderer(),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer(e){if(e===`overlayPane`||e===void 0)return;let t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer(e){return this.options.preferCanvas&&new tn(e)||new on(e)}});const sn=It.extend({initialize(e,t){It.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs(e){return e=new y(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});on.create=an,on.pointsToPath=rn,q.geometryToLayer=Lt,q.coordsToLatLng=zt,q.coordsToLatLngs=Bt,q.latLngToCoords=Vt,q.latLngsToCoords=Ht,q.getFeature=Ut,q.asFeature=Wt,L.mergeOptions({boxZoom:!0});const cn=z.extend({initialize(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on(`unload`,this._destroy,this)},addHooks(){A(this._container,`pointerdown`,this._onPointerDown,this)},removeHooks(){M(this._container,`pointerdown`,this._onPointerDown,this)},moved(){return this._moved},_destroy(){this._pane.remove(),delete this._pane},_resetState(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onPointerDown(e){if(!e.shiftKey||e.button!==0)return!1;this._clearDeferredResetState(),this._resetState(),Te(),De(),this._startPoint=this._map.pointerEventToContainerPoint(e),A(document,{contextmenu:F,pointermove:this._onPointerMove,pointerup:this._onPointerUp,keydown:this._onKeyDown},this)},_onPointerMove(e){this._moved||(this._moved=!0,this._box=w(`div`,`leaflet-zoom-box`,this._container),this._container.classList.add(`leaflet-crosshair`),this._map.fire(`boxzoomstart`)),this._point=this._map.pointerEventToContainerPoint(e);let t=new v(this._point,this._startPoint),n=t.getSize();E(this._box,t.min),this._box.style.width=`${n.x}px`,this._box.style.height=`${n.y}px`},_finish(){this._moved&&(this._box.remove(),this._container.classList.remove(`leaflet-crosshair`)),Ee(),Oe(),M(document,{contextmenu:F,pointermove:this._onPointerMove,pointerup:this._onPointerUp,keydown:this._onKeyDown},this)},_onPointerUp(e){if(e.button!==0||(this._finish(),!this._moved))return;this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(this._resetState.bind(this),0);let t=new y(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire(`boxzoomend`,{boxZoomBounds:t})},_onKeyDown(e){e.code===`Escape`&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});L.addInitHook(`addHandler`,`boxZoom`,cn),L.mergeOptions({doubleClickZoom:!0});const ln=z.extend({addHooks(){this._map.on(`dblclick`,this._onDoubleClick,this)},removeHooks(){this._map.off(`dblclick`,this._onDoubleClick,this)},_onDoubleClick(e){let t=this._map,n=t.getZoom(),r=t.options.zoomDelta,i=e.originalEvent.shiftKey?n-r:n+r;t.options.doubleClickZoom===`center`?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}});L.addInitHook(`addHandler`,`doubleClickZoom`,ln),L.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});const un=z.extend({addHooks(){if(!this._draggable){let e=this._map;this._draggable=new B(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on(`predrag`,this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on(`predrag`,this._onPreDragWrap,this),e.on(`zoomend`,this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}this._map._container.classList.add(`leaflet-grab`,`leaflet-touch-drag`),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks(){this._map._container.classList.remove(`leaflet-grab`,`leaflet-touch-drag`),this._draggable.disable()},moved(){return this._draggable?._moved},moving(){return this._draggable?._moving},_onDragStart(){let e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){let e=new y(this._map.options.maxBounds);this._offsetLimit=new v(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire(`movestart`).fire(`dragstart`),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag(e){if(this._map.options.inertia){let e=this._lastTime=+new Date,t=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(t),this._times.push(e),this._prunePositions(e)}this._map.fire(`move`,e).fire(`drag`,e)},_prunePositions(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd(){let e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit(){if(!this._viscosity||!this._offsetLimit)return;let e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)},_onPreDragWrap(){let e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,a=(r+t+n)%e-t-n,o=Math.abs(i+n)<Math.abs(a+n)?i:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd(e){let t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire(`dragend`,e),r)t.fire(`moveend`);else{this._prunePositions(+new Date);let e=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,i=n.easeLinearity,a=e.multiplyBy(i/r),o=a.distanceTo([0,0]),s=Math.min(n.inertiaMaxSpeed,o),c=a.multiplyBy(s/o),l=s/(n.inertiaDeceleration*i),u=c.multiplyBy(-l/2).round();!u.x&&!u.y?t.fire(`moveend`):(u=t._limitOffset(u,t.options.maxBounds),requestAnimationFrame(()=>{t.panBy(u,{duration:l,easeLinearity:i,noMoveStart:!0,animate:!0})}))}}});L.addInitHook(`addHandler`,`dragging`,un),L.mergeOptions({keyboard:!0,keyboardPanDelta:80});const dn=z.extend({keyCodes:{left:[`ArrowLeft`],right:[`ArrowRight`],down:[`ArrowDown`],up:[`ArrowUp`],zoomIn:[`Equal`,`NumpadAdd`,`BracketRight`],zoomOut:[`Minus`,`NumpadSubtract`,`Digit6`,`Slash`]},initialize(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks(){let e=this._map._container;e.tabIndex<=0&&(e.tabIndex=`0`),e.ariaKeyShortcuts=Object.values(this.keyCodes).flat().join(` `),A(e,{focus:this._onFocus,blur:this._onBlur,pointerdown:this._onPointerDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks(){this._removeHooks(),M(this._map._container,{focus:this._onFocus,blur:this._onBlur,pointerdown:this._onPointerDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onPointerDown(){if(this._focused)return;let e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)},_onFocus(){this._focused=!0,this._map.fire(`focus`)},_onBlur(){this._focused=!1,this._map.fire(`blur`)},_setPanDelta(e){let t=this._panKeys={},n=this.keyCodes;for(let r of n.left)t[r]=[-1*e,0];for(let r of n.right)t[r]=[e,0];for(let r of n.down)t[r]=[0,e];for(let r of n.up)t[r]=[0,-1*e]},_setZoomDelta(e){let t=this._zoomKeys={},n=this.keyCodes;for(let r of n.zoomIn)t[r]=e;for(let r of n.zoomOut)t[r]=-e},_addHooks(){A(document,`keydown`,this._onKeyDown,this)},_removeHooks(){M(document,`keydown`,this._onKeyDown,this)},_onKeyDown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=e.code,n=this._map,r;if(t in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(r=this._panKeys[t],e.shiftKey&&(r=new _(r).multiplyBy(3)),n.options.maxBounds&&(r=n._limitOffset(new _(r),n.options.maxBounds)),n.options.worldCopyJump){let e=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(r)));n.panTo(e)}else n.panBy(r)}else if(t in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===`Escape`&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;F(e)}});L.addInitHook(`addHandler`,`keyboard`,dn),L.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});const fn=z.extend({addHooks(){A(this._map._container,`wheel`,this._onWheelScroll,this),this._delta=0},removeHooks(){M(this._map._container,`wheel`,this._onWheelScroll,this),clearTimeout(this._timer)},_onWheelScroll(e){let t=$e(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.pointerEventToContainerPoint(e),this._startTime||=+new Date;let r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(this._performZoom.bind(this),r),F(e)},_performZoom(){let e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap??0;e._stop();let r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,a=n?Math.ceil(i/n)*n:i,o=e._limitZoom(t+(this._delta>0?a:-a))-t;this._delta=0,this._startTime=null,o&&(e.options.scrollWheelZoom===`center`?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}});L.addInitHook(`addHandler`,`scrollWheelZoom`,fn),L.mergeOptions({tapHold:C.touchNative&&C.safari&&C.mobile,tapTolerance:15});const pn=z.extend({addHooks(){A(this._map._container,`pointerdown`,this._onDown,this)},removeHooks(){M(this._map._container,`pointerdown`,this._onDown,this),clearTimeout(this._holdTimeout)},_onDown(e){clearTimeout(this._holdTimeout),!(Ve().length!==1||e.pointerType===`mouse`)&&(this._startPos=this._newPos=new _(e.clientX,e.clientY),this._holdTimeout=setTimeout((()=>{this._cancel(),this._isTapValid()&&(A(document,`pointerup`,P),A(document,`pointerup pointercancel`,this._cancelClickPrevent),this._simulateEvent(`contextmenu`,e))}),600),A(document,`pointerup pointercancel contextmenu`,this._cancel,this),A(document,`pointermove`,this._onMove,this))},_cancelClickPrevent:function e(){M(document,`pointerup`,P),M(document,`pointerup pointercancel`,e)},_cancel(){clearTimeout(this._holdTimeout),M(document,`pointerup pointercancel contextmenu`,this._cancel,this),M(document,`pointermove`,this._onMove,this)},_onMove(e){this._newPos=new _(e.clientX,e.clientY)},_isTapValid(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent(e,t){let n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});L.addInitHook(`addHandler`,`tapHold`,pn),L.mergeOptions({pinchZoom:C.touch,bounceAtZoomLimits:!0});const mn=z.extend({addHooks(){this._map._container.classList.add(`leaflet-touch-zoom`),A(this._map._container,`pointerdown`,this._onPointerStart,this)},removeHooks(){this._map._container.classList.remove(`leaflet-touch-zoom`),M(this._map._container,`pointerdown`,this._onPointerStart,this)},_onPointerStart(e){let t=this._map,n=Ve();if(n.length!==2||t._animatingZoom||this._zooming)return;let r=t.pointerEventToContainerPoint(n[0]),i=t.pointerEventToContainerPoint(n[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.pinchZoom!==`center`&&(this._pinchStartLatLng=t.containerPointToLatLng(r.add(i)._divideBy(2))),this._startDist=r.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),A(document,`pointermove`,this._onPointerMove,this),A(document,`pointerup pointercancel`,this._onPointerEnd,this),P(e)},_onPointerMove(e){let t=Ve();if(t.length!==2||!this._zooming)return;let n=this._map,r=n.pointerEventToContainerPoint(t[0]),i=n.pointerEventToContainerPoint(t[1]),a=r.distanceTo(i)/this._startDist;if(this._zoom=n.getScaleZoom(a,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&a<1||this._zoom>n.getMaxZoom()&&a>1)&&(this._zoom=n._limitZoom(this._zoom)),n.options.pinchZoom===`center`){if(this._center=this._startLatLng,a===1)return}else{let e=r._add(i)._divideBy(2)._subtract(this._centerPoint);if(a===1&&e.x===0&&e.y===0)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(e),this._zoom)}this._moved||=(n._moveStart(!0,!1),!0),cancelAnimationFrame(this._animRequest);let o=n._move.bind(n,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=requestAnimationFrame(o.bind(this)),P(e)},_onPointerEnd(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,cancelAnimationFrame(this._animRequest),M(document,`pointermove`,this._onPointerMove,this),M(document,`pointerup pointercancel`,this._onPointerEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});L.addInitHook(`addHandler`,`pinchZoom`,mn),L.addInitHook(function(){this.touchZoom=this.pinchZoom,this.options.touchZoom!==void 0&&(console.warn(`Map: touchZoom option is deprecated and will be removed in future versions. Use pinchZoom instead.`),this.options.pinchZoom=this.options.touchZoom,delete this.options.touchZoom),this.options.pinchZoom?this.pinchZoom.enable():this.pinchZoom.disable()}),L.BoxZoom=cn,L.DoubleClickZoom=ln,L.Drag=un,L.Keyboard=dn,L.ScrollWheelZoom=fn,L.TapHold=pn,L.PinchZoom=mn,L.TouchZoom=mn;var hn={__proto__:null,BlanketOverlay:Kt,Bounds:v,Browser:C,CRS:x,Canvas:tn,Circle:Ft,CircleMarker:Pt,Class:m,Control:R,DivIcon:Qt,DivOverlay:J,DomEvent:I,DomUtil:O,Draggable:B,Evented:g,FeatureGroup:W,GeoJSON:q,GridLayer:$t,Handler:z,Icon:At,ImageOverlay:qt,LatLng:b,LatLngBounds:y,Layer:U,LayerGroup:kt,LineUtil:St,Map:L,Marker:Nt,Path:G,Point:_,PolyUtil:lt,Polygon:It,Polyline:K,Popup:Xt,PosAnimation:tt,Projection:Tt,Rectangle:sn,Renderer:X,SVG:on,SVGOverlay:Yt,TileLayer:Y,Tooltip:Zt,Transformation:ne,Util:p,VideoOverlay:Jt,version:`2.0.0-alpha`};const gn=_n().L;_n().L=hn,_n().L.noConflict=function(){return _n().L=gn,this};function _n(){if(typeof globalThis<`u`)return globalThis;if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}function Z(e,t){return Object.assign(t,e.geocodingQueryParams)}function Q(e,t){return Object.assign(t,e.reverseQueryParams)}const vn=/[&<>"'`]/g,yn=/[&<>"'`]/,bn={"&":`&amp;`,"<":`&lt;`,">":`&gt;`,'"':`&quot;`,"'":`&#x27;`,"`":`&#x60;`};function xn(e){return bn[e]}function Sn(e){return e==null?``:e?(e=``+e,yn.test(e)?e.replace(vn,xn):e):e+``}function $(e,t){let n={Accept:`application/json`},r=new URL(e);return Object.entries(t).forEach(([e,t])=>{(Array.isArray(t)?t:[t]).forEach(t=>{r.searchParams.append(e,t)})}),fetch(r.toString(),{headers:n}).then(e=>e.json())}function Cn(e,t){return e.replace(/\{ *([\w_]+) *\}/g,(e,n)=>{let r=t[n];return r===void 0?r=``:typeof r==`function`&&(r=r(t)),Sn(r)})}var wn=class{options={serviceUrl:`https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer`,apiKey:``};constructor(e){p.setOptions(this,e)}async geocode(e){let t=Z(this.options,{token:this.options.apiKey,SingleLine:e,outFields:`Addr_Type`,forStorage:!1,maxLocations:10,f:`json`});return(await $(this.options.serviceUrl+`/findAddressCandidates`,t)).candidates.map(e=>{let t=new b(e.location.y,e.location.x),n=new y(new b(e.extent.ymax,e.extent.xmax),new b(e.extent.ymin,e.extent.xmin));return{name:e.address,bbox:n,center:t}})}suggest(e){return this.geocode(e)}async reverse(e,t){let n=Q(this.options,{location:e.lng+`,`+e.lat,distance:100,f:`json`}),r=await $(this.options.serviceUrl+`/reverseGeocode`,n);if(!r||r.error)return[];let i=new b(r.location.y,r.location.x),a=new y(i,i);return[{name:r.address.Match_addr,center:i,bbox:a}]}};function Tn(e){return new wn(e)}var En=class{options={serviceUrl:`https://dev.virtualearth.net/REST/v1/Locations/`};constructor(e){p.setOptions(this,e)}async geocode(e){let t=Z(this.options,{query:e,key:this.options.apiKey}),n=await $(this.options.serviceUrl,t);return this._parseResults(n)}async reverse(e,t){let n=Q(this.options,{key:this.options.apiKey}),r=await $(this.options.serviceUrl+e.lat+`,`+e.lng,n);return this._parseResults(r)}_parseResults(e){return e.resourceSets[0].resources.map(e=>{let t=e.bbox;return{name:e.name,bbox:new y([t[0],t[1]],[t[2],t[3]]),center:new b(...e.point.coordinates)}})}};function Dn(e){return new En(e)}var On=class{options={apiKey:``,serviceUrl:`https://atlas.microsoft.com/search`};constructor(e){if(p.setOptions(this,e),!this.options.apiKey)throw Error(`Azure Maps Geocoder requires an API key.`)}async geocode(e){let t={"api-version":`1.0`,query:e,"subscription-key":this.options.apiKey},n=this.options.serviceUrl+`/address/json`;return((await $(n,t)).results||[]).map(e=>({name:e.address.freeformAddress,bbox:new y([e.viewport.topLeftPoint.lat,e.viewport.topLeftPoint.lon],[e.viewport.btmRightPoint.lat,e.viewport.btmRightPoint.lon]),center:new b(e.position.lat,e.position.lon)}))}async reverse(e,t){let n={"api-version":`1.0`,query:e.lat+`,`+e.lng,"subscription-key":this.options.apiKey},r=this.options.serviceUrl+`/address/reverse/json`;return((await $(r,n)).addresses||[]).map(t=>({name:t.address.freeformAddress,bbox:new y([t.viewport.topLeftPoint.lat,t.viewport.topLeftPoint.lon],[t.viewport.btmRightPoint.lat,t.viewport.btmRightPoint.lon]),center:new b(e.lat,e.lng)}))}};function kn(e){return new On(e)}var An=class{options={serviceUrl:`https://maps.googleapis.com/maps/api/geocode/json`};constructor(e){p.setOptions(this,e)}async geocode(e){let t=Z(this.options,{key:this.options.apiKey,address:e}),n=await $(this.options.serviceUrl,t);return this._parseResults(n)}async reverse(e,t){let n=Q(this.options,{key:this.options.apiKey,latlng:e.lat+`,`+e.lng}),r=await $(this.options.serviceUrl,n);return this._parseResults(r)}_parseResults(e){return(e.results||[])?.map(e=>{let t=new b(e.geometry.location.lat,e.geometry.location.lng),n=new y(new b(e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng),new b(e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng));return{name:e.formatted_address,bbox:n,center:t,properties:e.address_components}})}};function jn(e){return new An(e)}var Mn=class{options={serviceUrl:`https://geocoder.api.here.com/6.2/`,app_id:``,app_code:``,apiKey:``,maxResults:5};constructor(e){if(p.setOptions(this,e),e?.apiKey)throw Error(`apiKey is not supported, use app_id/app_code instead!`)}geocode(e){let t=Z(this.options,{searchtext:e,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+`geocode.json`,t)}reverse(e,t){let n=e.lat+`,`+e.lng;this.options.reverseGeocodeProxRadius&&(n+=`,`+this.options.reverseGeocodeProxRadius);let r=Q(this.options,{prox:n,mode:`retrieveAddresses`,app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+`reversegeocode.json`,r)}async getJSON(e,t){return((await $(e,t)).response.view?.[0]?.result||[]).map(e=>{let t=e.location,n=new b(t.displayPosition.latitude,t.displayPosition.longitude),r=new y(new b(t.mapView.topLeft.latitude,t.mapView.topLeft.longitude),new b(t.mapView.bottomRight.latitude,t.mapView.bottomRight.longitude));return{name:t.address.label,properties:t.address,bbox:r,center:n}})}},Nn=class{options={serviceUrl:`https://geocode.search.hereapi.com/v1`,apiKey:``,app_id:``,app_code:``,maxResults:10};constructor(e){p.setOptions(this,e)}geocode(e){let t=Z(this.options,{q:e,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!t.at&&!t.in)throw Error(`at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.`);return this.getJSON(this.options.serviceUrl+`/discover`,t)}reverse(e,t){let n=Q(this.options,{at:e.lat+`,`+e.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});return this.getJSON(this.options.serviceUrl+`/revgeocode`,n)}async getJSON(e,t){return((await $(e,t)).items||[]).map(e=>{let t=new b(e.position.lat,e.position.lng),n;return n=e.mapView?new y(new b(e.mapView.south,e.mapView.west),new b(e.mapView.north,e.mapView.east)):new y(new b(e.position.lat,e.position.lng),new b(e.position.lat,e.position.lng)),{name:e.address.label,properties:e.address,bbox:n,center:t}})}};function Pn(e){return e?.apiKey?new Nn(e):new Mn(e)}function Fn(e){let t;if(t=e.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return new b((/N/i.test(t[1])?1:-1)*t[2],(/E/i.test(t[3])?1:-1)*t[4]);if(t=e.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return new b((/N/i.test(t[2])?1:-1)*t[1],(/E/i.test(t[4])?1:-1)*t[3]);if(t=e.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?$/))return new b((/N/i.test(t[1])?1:-1)*(+t[2]+t[3]/60),(/E/i.test(t[4])?1:-1)*(+t[5]+t[6]/60));if(t=e.match(/^(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([NS])\W*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([EW])$/))return new b((/N/i.test(t[3])?1:-1)*(+t[1]+t[2]/60),(/E/i.test(t[6])?1:-1)*(+t[4]+t[5]/60));if(t=e.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?$/))return new b((/N/i.test(t[1])?1:-1)*(+t[2]+t[3]/60+t[4]/3600),(/E/i.test(t[5])?1:-1)*(+t[6]+t[7]/60+t[8]/3600));if(t=e.match(/^(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]\s*([NS])\W*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\s*([EW])$/))return new b((/N/i.test(t[4])?1:-1)*(+t[1]+t[2]/60+t[3]/3600),(/E/i.test(t[8])?1:-1)*(+t[5]+t[6]/60+t[7]/3600));if(t=e.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return new b(+t[1],+t[2])}var In=class{options={next:void 0,sizeInMeters:1e4};constructor(e){p.setOptions(this,e)}async geocode(e){let t=Fn(e);return t?[{name:e,center:t,bbox:t.toBounds(this.options.sizeInMeters)}]:this.options.next?this.options.next.geocode(e):[]}};function Ln(e){return new In(e)}var Rn=class{options={serviceUrl:`https://api.mapbox.com/geocoding/v5/mapbox.places/`};constructor(e){p.setOptions(this,e)}_getProperties(e){let t={text:e.text,address:e.address};return(e.context||[]).forEach(e=>{let n=e.id.split(`.`)[0];t[n]=e.text,e.short_code&&(t.countryShortCode=e.short_code)}),t}async geocode(e){let t=this.options.serviceUrl+encodeURIComponent(e)+`.json`,n=Z(this.options,{access_token:this.options.apiKey});n.proximity!==void 0&&n.proximity.lat!==void 0&&n.proximity.lng!==void 0&&(n.proximity=n.proximity.lng+`,`+n.proximity.lat);let r=await $(t,n);return this._parseResults(r)}suggest(e){return this.geocode(e)}async reverse(e,t){let n=this.options.serviceUrl+e.lng+`,`+e.lat+`.json`,r=Q(this.options,{access_token:this.options.apiKey}),i=await $(n,r);return this._parseResults(i)}_parseResults(e){return e.features?.length?e.features.map(e=>{let t=new b(...e.center.reverse()),n;return n=e.bbox?new y(new b(...e.bbox.slice(0,2).reverse()),new b(...e.bbox.slice(2,4).reverse())):new y(t,t),{name:e.place_name,bbox:n,center:t,properties:this._getProperties(e)}}):[]}};function zn(e){return new Rn(e)}var Bn=class{options={serviceUrl:`https://www.mapquestapi.com/geocoding/v1`};constructor(e){p.setOptions(this,e),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...e){return e.filter(e=>!!e).join(`, `)}async geocode(e){let t=Z(this.options,{key:this.options.apiKey,location:e,limit:5,outFormat:`json`}),n=await $(this.options.serviceUrl+`/address`,t);return this._parseResults(n)}async reverse(e,t){let n=Q(this.options,{key:this.options.apiKey,location:e.lat+`,`+e.lng,outputFormat:`json`}),r=await $(this.options.serviceUrl+`/reverse`,n);return this._parseResults(r)}_parseResults(e){return(e.results?.[0]?.locations||[]).map(e=>{let t=new b(e.latLng.lat,e.latLng.lng);return{name:this._formatName(e.street,e.adminArea4,e.adminArea3,e.adminArea1),bbox:new y(t,t),center:t}})}};function Vn(e){return new Bn(e)}var Hn=class{options={userId:``,apiKey:``,serviceUrl:`https://neutrinoapi.com/`};constructor(e){p.setOptions(this,e)}async geocode(e){let t=Z(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:e.split(/\s+/).join(`.`)}),n=await $(this.options.serviceUrl+`geocode-address`,t);if(!n.locations)return[];n.geometry=n.locations[0];let r=new b(n.geometry.latitude,n.geometry.longitude),i=new y(r,r);return[{name:n.geometry.address,bbox:i,center:r}]}suggest(e){return this.geocode(e)}async reverse(e,t){let n=Q(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:e.lat,longitude:e.lng}),r=await $(this.options.serviceUrl+`geocode-reverse`,n);if(r.status.status!==200||!r.found)return[];let i=new b(e.lat,e.lng),a=new y(i,i);return[{name:r.address,bbox:a,center:i}]}};function Un(e){return new Hn(e)}var Wn=class{options={serviceUrl:`https://nominatim.openstreetmap.org/`,htmlTemplate(e){let t=e.address,n,r=[];return(t.road||t.building)&&r.push(`{building} {road} {house_number}`),(t.city||t.town||t.village||t.hamlet)&&(n=r.length>0?`leaflet-control-geocoder-address-detail`:``,r.push(`<span class="`+n+`">{postcode} {city} {town} {village} {hamlet}</span>`)),(t.state||t.country)&&(n=r.length>0?`leaflet-control-geocoder-address-context`:``,r.push(`<span class="`+n+`">{state} {country}</span>`)),Cn(r.join(`<br/>`),t)}};constructor(e){p.setOptions(this,e||{})}async geocode(e){let t=Z(this.options,{q:e,limit:5,format:`json`,addressdetails:1});return(await $(this.options.serviceUrl+`search`,t)).map(e=>{let t=e.boundingbox;return{icon:e.icon,name:e.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(e):void 0,bbox:new y([+t[0],+t[2]],[+t[1],+t[3]]),center:new b(+e.lat,+e.lon),properties:e}})}async reverse(e,t){let n=Q(this.options,{lat:e.lat,lon:e.lng,zoom:Math.round(Math.log(t/256)/Math.log(2)),addressdetails:1,format:`json`}),r=await $(this.options.serviceUrl+`reverse`,n);if(!r?.lat||!r?.lon)return[];let i=new b(+r.lat,+r.lon),a=new y(i,i);return[{name:r.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(r):void 0,center:i,bbox:a,properties:r}]}};function Gn(e){return new Wn(e)}var Kn=class{options={};constructor(e){p.setOptions(this,e)}async geocode(e){try{let t=this.options.OpenLocationCode.decode(e);return[{name:e,center:new b(t.latitudeCenter,t.longitudeCenter),bbox:new y(new b(t.latitudeLo,t.longitudeLo),new b(t.latitudeHi,t.longitudeHi))}]}catch(e){return console.warn(e),[]}}async reverse(e,t){try{return[{name:this.options.OpenLocationCode.encode(e.lat,e.lng,this.options.codeLength),center:new b(e.lat,e.lng),bbox:new y(new b(e.lat,e.lng),new b(e.lat,e.lng))}]}catch(e){return console.warn(e),[]}}};function qn(e){return new Kn(e)}var Jn=class{options={serviceUrl:`https://api.opencagedata.com/geocode/v1/json`};constructor(e){p.setOptions(this,e)}async geocode(e){let t=Z(this.options,{key:this.options.apiKey,q:e}),n=await $(this.options.serviceUrl,t);return this._parseResults(n)}suggest(e){return this.geocode(e)}async reverse(e,t){let n=Q(this.options,{key:this.options.apiKey,q:[e.lat,e.lng].join(`,`)}),r=await $(this.options.serviceUrl,n);return this._parseResults(r)}_parseResults(e){return(e.results||[]).map(e=>{let t=new b(e.geometry.lat,e.geometry.lng),n=e.annotations&&e.annotations.bounds?new y(new b(e.annotations.bounds.northeast.lat,e.annotations.bounds.northeast.lng),new b(e.annotations.bounds.southwest.lat,e.annotations.bounds.southwest.lng)):new y(t,t);return{name:e.formatted,bbox:n,center:t,properties:e}})}};function Yn(e){return new Jn(e)}var Xn=class{options={serviceUrl:`https://api.geocode.earth/v1`};constructor(e){p.setOptions(this,e)}async geocode(e){let t=Z(this.options,{api_key:this.options.apiKey,text:e}),n=await $(this.options.serviceUrl+`/search`,t);return this._parseResults(n)}async suggest(e){let t=Z(this.options,{api_key:this.options.apiKey,text:e}),n=await $(this.options.serviceUrl+`/autocomplete`,t);return this._parseResults(n)}async reverse(e,t){let n=Q(this.options,{api_key:this.options.apiKey,"point.lat":e.lat,"point.lon":e.lng}),r=await $(this.options.serviceUrl+`/reverse`,n);return this._parseResults(r)}_parseResults(e){return(e.features||[]).map(e=>{let t=e.geometry.coordinates,n=new b(t[1],t[0]),r=Array.isArray(e.bbox)&&e.bbox.length===4?new y([e.bbox[1],e.bbox[0]],[e.bbox[3],e.bbox[2]]):new y(n,n);return{name:e.properties.label,center:n,bbox:r,properties:e.properties}})}};function Zn(e){return new Xn(e)}const Qn=Xn,$n=Zn,er=Xn,tr=Zn;var nr=class extends Xn{constructor(e){super(Object.assign({serviceUrl:`https://api.openrouteservice.org/geocode`},e))}};function rr(e){return new nr(e)}var ir=class{options={serviceUrl:`https://photon.komoot.io/api/`,reverseUrl:`https://photon.komoot.io/reverse/`,nameProperties:[`name`,`street`,`suburb`,`hamlet`,`town`,`city`,`state`,`country`]};constructor(e){p.setOptions(this,e)}async geocode(e,t){let n=Z(this.options,{q:e}),r=t?.map?.getCenter?.();r&&(n.lat=r.lat,n.lon=r.lng);let i=t?.map?.getZoom?.();i&&(n.zoom=i);let a=await $(this.options.serviceUrl,n);return this._parseResults(a)}suggest(e){return this.geocode(e)}async reverse(e,t){let n=Q(this.options,{lat:e.lat,lon:e.lng}),r=await $(this.options.reverseUrl,n);return this._parseResults(r)}_parseResults(e){return(e.features||[]).map(e=>{let t=e.geometry.coordinates,n=new b(t[1],t[0]),r=e.properties?.extent,i=r?new y([r[1],r[0]],[r[3],r[2]]):new y(n,n);return{name:this._decodeFeatureName(e),html:this.options.htmlTemplate?this.options.htmlTemplate(e):void 0,center:n,bbox:i,properties:e.properties}})}_decodeFeatureName(e){return(this.options.nameProperties||[]).map(t=>e.properties?.[t]).filter(e=>!!e).join(`, `)}};function ar(e){return new ir(e)}var or=class{options={serviceUrl:`https://api.what3words.com/v2/`};constructor(e){p.setOptions(this,e)}async geocode(e){let t=await $(this.options.serviceUrl+`forward`,Z(this.options,{key:this.options.apiKey,addr:e.split(/\s+/).join(`.`)}));if(!t.geometry)return[];let n=new b(t.geometry.lat,t.geometry.lng),r=new y(n,n);return[{name:t.words,bbox:r,center:n}]}suggest(e){return this.geocode(e)}async reverse(e,t){let n=await $(this.options.serviceUrl+`reverse`,Q(this.options,{key:this.options.apiKey,coords:[e.lat,e.lng].join(`,`)}));if(n.status.status!=200)return[];let r=new b(n.geometry.lat,n.geometry.lng),i=new y(r,r);return[{name:n.words,bbox:i,center:r}]}};function sr(e){return new or(e)}const cr=Object.freeze(Object.defineProperty({__proto__:null,ArcGis:wn,AzureMaps:On,Bing:En,GeocodeEarth:Qn,Google:An,HERE:Mn,HEREv2:Nn,LatLng:In,MapQuest:Bn,Mapbox:Rn,Mapzen:er,Neutrino:Hn,Nominatim:Wn,OpenCage:Jn,OpenLocationCode:Kn,Openrouteservice:nr,Pelias:Xn,Photon:ir,What3Words:or,arcgis:Tn,azure:kn,bing:Dn,geocodeEarth:$n,geocodingParams:Z,google:jn,here:Pn,latLng:Ln,mapQuest:Vn,mapbox:zn,mapzen:tr,neutrino:Un,nominatim:Gn,openLocationCode:qn,opencage:Yn,openrouteservice:rr,parseLatLng:Fn,pelias:Zn,photon:ar,reverseParams:Q,what3words:sr},Symbol.toStringTag,{value:`Module`}));var lr=class{constructor(...e){}};Object.getOwnPropertyNames(R.prototype).forEach(e=>lr.prototype[e]=R.prototype[e]),Object.getOwnPropertyNames(g.prototype).forEach(e=>lr.prototype[e]=g.prototype[e]);var ur=class extends lr{options={showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:`touch`,position:`topright`,placeholder:`Search...`,errorMessage:`Nothing found.`,iconLabel:`Initiate a new search`,query:``,queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0};_alts;_container;_errorElement;_geocodeMarker;_input;_lastGeocode;_map;_preventBlurCollapse;_requestCount=0;_results;_selection;_suggestTimeout;constructor(e){super(e),p.setOptions(this,e),this.options.geocoder||(this.options.geocoder=new Wn)}addThrobberClass(){this._container.classList.add(`leaflet-control-geocoder-throbber`)}removeThrobberClass(){this._container.classList.remove(`leaflet-control-geocoder-throbber`)}onAdd(e){let t=`leaflet-control-geocoder`,n=O.create(`div`,t+` leaflet-bar`),r=O.create(`button`,t+`-icon`,n),i=O.create(`div`,t+`-form`,n);this._map=e,this._container=n,r.innerHTML=`&nbsp;`,r.type=`button`,r.setAttribute(`aria-label`,this.options.iconLabel);let a=this._input=O.create(`input`,``,i);return a.type=`search`,a.value=this.options.query,a.placeholder=this.options.placeholder,I.disableClickPropagation(a),this._errorElement=O.create(`div`,t+`-form-no-error`,n),this._errorElement.innerHTML=this.options.errorMessage,this._alts=O.create(`ul`,t+`-alternatives leaflet-control-geocoder-alternatives-minimized`,n),I.disableClickPropagation(this._alts),I.on(a,`keydown`,this._keydown,this),this.options.geocoder?.suggest&&I.on(a,`input`,this._change,this),I.on(a,`blur`,()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand===`click`?I.on(n,`click`,e=>{e.button===0&&e.detail!==2&&this._toggle()}):this.options.expand===`touch`?I.on(n,C.touch?`touchstart mousedown`:`mousedown`,e=>{this._toggle(),e.preventDefault(),e.stopPropagation()},this):(I.on(n,`mouseover`,this._expand,this),I.on(n,`mouseout`,this._collapse,this),this._map.on(`movestart`,this._collapse,this)):(this._expand(),C.touch?I.on(n,`touchstart`,()=>this._geocode()):I.on(n,`click`,()=>this._geocode())),this.options.defaultMarkGeocode&&this.on(`markgeocode`,this.markGeocode,this),this.on(`startgeocode`,this.addThrobberClass,this),this.on(`finishgeocode`,this.removeThrobberClass,this),this.on(`startsuggest`,this.addThrobberClass,this),this.on(`finishsuggest`,this.removeThrobberClass,this),I.disableClickPropagation(n),n}setQuery(e){return this._input.value=e,this}_geocodeResult(e,t){!t&&this.options.showUniqueResult&&e.length===1?this._geocodeResultSelected(e[0]):e.length>0?(this._alts.innerHTML=``,this._results=e,this._alts.classList.remove(`leaflet-control-geocoder-alternatives-minimized`),this._container.classList.add(`leaflet-control-geocoder-options-open`),this._results.forEach((e,t)=>this._alts.appendChild(this._createAlt(e,t)))):(this._container.classList.add(`leaflet-control-geocoder-options-error`),this._errorElement.classList.add(`leaflet-control-geocoder-error`))}markGeocode(e){let t=e.geocode;return this._map.fitBounds(t.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new Nt(t.center).bindPopup(t.html||t.name).addTo(this._map).openPopup(),this}async _geocode(e=!1){let t=this._input.value;if(!e&&t.length<this.options.queryMinLength)return;let n=++this._requestCount;this._lastGeocode=t,e||this._clearResults();let r={input:t};this.fire(e?`startsuggest`:`startgeocode`,r);let i={map:this._map},a=e?await this.options.geocoder.suggest(t,i):await this.options.geocoder.geocode(t,i);if(n===this._requestCount){let n={input:t,results:a};this.fire(e?`finishsuggest`:`finishgeocode`,n),this._geocodeResult(a,e)}}_geocodeResultSelected(e){let t={geocode:e};this.fire(`markgeocode`,t)}_toggle(){this._container.classList.contains(`leaflet-control-geocoder-expanded`)?this._collapse():this._expand()}_expand(){this._container.classList.add(`leaflet-control-geocoder-expanded`),this._input.select(),this.fire(`expand`)}_collapse(){this._container.classList.remove(`leaflet-control-geocoder-expanded`),this._alts.classList.add(`leaflet-control-geocoder-alternatives-minimized`),this._errorElement.classList.remove(`leaflet-control-geocoder-error`),this._container.classList.remove(`leaflet-control-geocoder-options-open`),this._container.classList.remove(`leaflet-control-geocoder-options-error`),this._input.blur(),this.fire(`collapse`)}_clearResults(){this._alts.classList.add(`leaflet-control-geocoder-alternatives-minimized`),this._selection=null,this._errorElement.classList.remove(`leaflet-control-geocoder-error`),this._container.classList.remove(`leaflet-control-geocoder-options-open`),this._container.classList.remove(`leaflet-control-geocoder-options-error`)}_createAlt(e,t){let n=O.create(`li`,``),r=O.create(`a`,``,n),i=this.options.showResultIcons&&e.icon?O.create(`img`,``,r):null,a=e.html?void 0:document.createTextNode(e.name),o=t=>{this._preventBlurCollapse=!0,I.stop(t),this._geocodeResultSelected(e),I.on(n,`click touchend`,()=>{this.options.collapsed?this._collapse():this._clearResults()})};return i&&(i.src=e.icon),n.setAttribute(`data-result-index`,String(t)),e.html?r.innerHTML+=e.html:a&&r.appendChild(a),I.on(n,`mousedown touchstart`,o,this),n}_keydown(e){let t=e=>{this._selection&&=(this._selection.classList.remove(`leaflet-control-geocoder-selected`),this._selection[e>0?`nextSibling`:`previousSibling`]),this._selection||=this._alts[e>0?`firstChild`:`lastChild`],this._selection&&this._selection.classList.add(`leaflet-control-geocoder-selected`)};switch(e.key){case`Escape`:this.options.collapsed?this._collapse():this._clearResults();break;case`ArrowUp`:t(-1);break;case`ArrowDown`:t(1);break;case`Enter`:if(this._selection){let e=parseInt(this._selection.getAttribute(`data-result-index`),10);this._geocodeResultSelected(this._results[e]),this._clearResults()}else this._geocode();break;default:return}I.preventDefault(e)}_change(){let e=this._input.value;e!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),e.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}};function dr(e){return new ur(e)}Object.assign(ur,cr),Object.assign(R,{Geocoder:ur,geocoder:dr});var fr=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-up-right" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5"/>
  <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0z"/>
</svg>`;function pr(n){let r=new L(n.value).fitWorld(),i=t(`mapLayer`,``),a=t(`mapView`,{lat:51.505,lng:-.09,zoom:13});r.attributionControl.setPrefix(`<a href="https://github.com/simon04/locator-tool/" target="_blank" rel="external noopener">@simon04/locator-tool</a>
    (<a href="https://github.com/simon04/locator-tool/blob/master/LICENSE" target="_blank" rel="external noopener">GPL v3</a>)`);let o=fr,s=`OSM ${o}`,c={maxZoom:21,maxNativeZoom:19},l={[s]:new Y(`https://tile.openstreetmap.org/{z}/{x}/{y}.png`,{...c,attribution:`&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors`}),OpenTopoMap:new Y(`https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png`,{...c,maxNativeZoom:17,attribution:`&copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>), <a href="http://osm.org/copyright">OpenStreetMap</a> contributors`}),"Wikimedia Maps":new Y(`https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png`,{...c,maxNativeZoom:19,attribution:`<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>`}),"Esri World Imagery":new Y(`https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}`,{...c,maxNativeZoom:19,attribution:`Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community`}),[`basemap.at 🇦🇹 ${o}`]:new Y(`https://mapsneu.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg`,{...c,maxNativeZoom:19,attribution:`&copy; <a href="https://basemap.at/">basemap.at</a>`})},u=new R.Layers().addTo(r);for(let[e,t]of Object.entries(l))u.addBaseLayer(t,e);(l[i.value]||l[s]).addTo(r);let d=new ur({placeholder:`…`,position:`topleft`,defaultMarkGeocode:!1});return d.on(`markgeocode`,e=>r.fitBounds(e.geocode.bbox)),d.addTo(r),r.on(`baselayerchange`,e=>i.value=e.name),r.on(`zoomend modeend`,()=>{a.value={lat:r.getCenter().lat,lng:r.getCenter().lng,zoom:r.getZoom()}}),e(a,e=>{r.setView([e.lat,e.lng],e.zoom)},{immediate:!0}),{map:r,mapLayer:i,mapView:a}}export{pr as b,Pt as c,Qt as d,At as e,Nt as f,Xt as g};
//# sourceMappingURL=CAGvK2Y1ndSEpwzkddz.js.map